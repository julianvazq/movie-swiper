{"version":3,"sources":["components/AppContainer/style.ts","types/room.ts","components/AppContainer/index.tsx","assets/themoviedb-logo.svg","components/Footer/style.ts","components/Footer/index.tsx","sockets/index.ts","sockets/emitters.ts","styles/index.ts","types/actions.ts","assets/poster_unavailable.png","utils/index.ts","context/UserContext.tsx","hooks/useLocalStorage.ts","sockets/listeners.ts","context/RoomContext.tsx","hooks/useViewportWidth.ts","components/Modal/index.tsx","components/Nav/style.ts","components/Nav/index.tsx","components/ProtectedRoute/style.ts","components/ProtectedRoute/index.tsx","context/MoviePreviewContext.tsx","pages/create/CreateForm/style.ts","pages/create/CreateForm/index.tsx","pages/create/Create/index.tsx","pages/expired/Expired/style.ts","pages/expired/Expired/index.tsx","pages/home/Instruction/style.ts","pages/home/Instruction/index.tsx","pages/home/Explainer/style.ts","pages/home/Explainer/index.tsx","pages/home/MovieCardDisplay/style.ts","pages/home/MovieCardDisplay/index.tsx","pages/home/Showcase/style.ts","pages/home/Showcase/index.tsx","assets/movie-posters.jpg","pages/home/Home/style.ts","pages/home/Home/index.tsx","pages/join/JoinForm/style.ts","pages/join/JoinForm/index.tsx","pages/join/Join/index.tsx","components/InfoBox/style.ts","components/InfoBox/index.tsx","pages/results/LikeList/styled.ts","pages/results/LikeList/index.tsx","pages/results/ResultCard/style.ts","pages/results/ResultCard/index.tsx","pages/results/ResultList/style.ts","pages/results/ResultList/index.tsx","pages/results/Results/style.ts","pages/results/Results/index.tsx","hooks/useMovieManager.tsx","pages/selection/MovieDetail/style.ts","pages/selection/MovieDetail/index.tsx","components/InviteLink/style.ts","components/InviteLink/index.tsx","components/FixedContainer/style.ts","components/FixedContainer/index.tsx","pages/selection/ActionButton/style.ts","pages/selection/ActionButton/index.tsx","components/Tabs/style.ts","components/Tabs/index.tsx","pages/selection/MovieSearch/genres.ts","pages/selection/MovieListItem/styled.ts","pages/selection/MovieListItem/index.tsx","pages/selection/MovieList/styled.ts","pages/selection/MovieList/index.tsx","hooks/useFetchMovies.ts","components/MovieCardSkeleton/style.ts","components/MovieCardSkeleton/index.tsx","pages/selection/MovieCard/styled.ts","pages/selection/MovieCard/index.tsx","pages/selection/MovieGallery/style.ts","pages/selection/MovieGallery/index.tsx","pages/selection/MovieSearch/style.ts","pages/selection/MovieSearch/index.tsx","pages/selection/MovieSelection/index.tsx","pages/selection/Selection/style.ts","pages/selection/Selection/index.tsx","pages/swiper/Matches/index.tsx","pages/swiper/SwipeItem/style.ts","pages/swiper/SwipeItem/index.tsx","pages/swiper/SwipeArea/style.ts","pages/swiper/SwipeArea/index.tsx","pages/swiper/Swiper/style.ts","pages/swiper/Swiper/index.tsx","App.tsx","index.tsx"],"names":["Stage","Background","styled","main","AppContainer","children","Container","footer","props","$display","InnerContainer","div","TheMovieDB","img","Attribution","p","Footer","pathname","useLocation","showFooter","includes","RESULTS","href","target","rel","src","TheMovieDBLogo","alt","socket","io","reconnection","createRoom","data","callback","emit","ActionType","MaxWidthContainer","section","FormPageContainer","StyledForm","form","ErrorMessage","Title","h1","Subtitle","h2","Button","button","FormButton","$disabled","FontWeight600","span","ToastType","generateImageUrl","imageSrc","width","PosterUnavailable","useToast","type","message","duration","icon","successOptions","id","style","backgroundColor","color","iconTheme","primary","secondary","errorOptions","loadingOptions","toast","success","error","loading","UserContext","createContext","user","setUser","useUser","useContext","UserProvider","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","useLocalStorage","useEffect","name","on","Provider","initialState","roomName","roomId","ownerId","participants","movies","stage","NULL","RoomContext","room","dispatch","useRoom","reducer","state","action","INITIALIZE_ROOM","payload","participant","SELECTION","GET_ROOM","JOIN","filter","LEAVE","CHANGE_OWNER","ADD_MOVIE","m","movie","REMOVE_MOVIE","SWIPE_MOVIE","swipedMovie","find","updatedSwipes","swipes","swipe","map","liked","updatedMovie","SET_STAGE","TOGGLE_READY","ready","USER_NAME_CHANGE","userId","Error","LS_KEY","RoomProvider","useReducer","rooms","roomIdParam","split","Boolean","toastId","useRef","toastTimeoutId","changeOwnerTimeoutId","getLSRooms","setLocalStorage","socketId","onParticipantJoin","newParticipant","clearTimeout","current","Success","newOwnerSocketId","setTimeout","onRoomOwnerChange","newOwnerId","Custom","once","onGetRoom","onMovieAdd","addedByUserId","title","onMovieRemove","movieId","onMovieSwipe","onToggleReady","userToToggle","onStartSwiper","SWIPER","onNameChange","affectedUser","oldName","removeAllListeners","isOwner","everyoneReady","length","every","dismiss","useViewportWidth","setWidth","useLayoutEffect","updateSize","innerWidth","addEventListener","removeEventListener","Modal","visible","onClose","maxWidth","height","styles","background","borderRadius","closeOnEsc","customStyles","animation","nav","Logo","NavContainer","NavLinks","StyledLink","NavLink","$active","UserButton","UserIcon","FaUserCircle","ModalContent","InputGroup","ChangeButton","Nav","show","forceShow","setVisible","newName","setNewName","username","slice","closeModal","to","activeStyle","fontWeight","onClick","onSubmit","e","preventDefault","htmlFor","onChange","Text","dotsAnimation","keyframes","LoadingDots","ProtectedRoute","Component","component","computedMatch","rest","history","useHistory","status","setStatus","params","path","url","replace","res","push","console","log","swipedAll","MoviePreviewContext","moviePreview","setMoviePreview","useMoviePreview","MoviePreviewProvider","CreateForm","initialInputs","disabled","setDisabled","inputs","setInputs","touched","setTouched","submitted","setSubmitted","errors","getErrors","isFormValid","Object","keys","disconnect","connect","newUser","randomColor","luminosity","hue","onBlur","Create","Helmet","Expired","article","Headline","h3","Body","Instruction","headline","React","Children","toArray","child","isValidElement","body","Grid","iconStyles","css","UsersIcon","FaUsers","FilmIcon","FaFilm","PollIcon","FaPollH","instructions","Explainer","i","Image","ButtonSection","InfoIcon","RiInformationLine","MovieCardDisplay","setMovie","setLoading","imageUrl","poster_path","a","axios","get","fetchMovie","MovieCardDisplayContainer","Content","Showcase","Cinema","CTA","MainTitle","Bold","GetStartedButton","br","Home","JoinForm","useParams","Join","margin","TextContainer","aside","InfoBox","text","List","ul","Item","li","Color","Name","wrap","MoreItems","LikeList","users","Card","ResultsArea","ImageContainer","motion","TotalLikes","MovieTitle","ResultsContainer","DetailButton","ExpandIcon","ResultCard","usersWhoLiked","toString","Empty","ResultList","Results","filteredMovies","likes","reduce","acc","sort","b","participantIds","allSwiped","swipeIds","getInfoBoxProps","useMovieManager","movieInList","addedByMe","movieActionHandler","removeMovie","addedMovie","buttonBackgroundColor","Overlay","ContentContainer","Tag","WrapContainer","Genre","Overview","Label","Divider","RatingText","GridCell","Star","AiFillStar","Video","iframe","ButtonContainer","BackButton","AddButton","BackIcon","IoIosArrowBack","PlusIcon","HiOutlinePlus","MinusIcon","HiMinus","CloseIcon","IoMdClose","CloseButton","DesktopAddButton","MovieDetail","setMovieDetail","details","setDetails","trailerData","videos","results","video","site","trailerUrl","inSelection","location","backToSelection","onEscPress","fetchMovieDetails","document","overflow","cancelToken","cancel","CancelToken","source","token","data-overlay","attributes","initial","opacity","animate","exit","transition","layoutId","delay","tagline","genres","genre","overview","vote_average","runtime","release_date","original_language","toUpperCase","frameBorder","allowFullScreen","y","label","InputContainer","CopyButton","InviteLink","inputRef","defaultValue","ref","select","readOnly","navigator","clipboard","writeText","position","FixedContainer","variants","UserCheck","FaUserCheck","FillCheckbox","RiCheckboxCircleFill","EmptyCheckbox","RiCheckboxCircleLine","PlayIcon","SiTinder","RiMovieFill","CrownIcon","FaCrown","FaUserAlt","MainButton","disable","ToggleReadyButton","$ready","ReadyButton","StartButton","ActionButton","groupModalVisible","setGroupModalVisible","swipeModalVisible","setSwipeModalVisible","owner","isUserReady","participantsReady","disableSwiping","timeoutId","undefined","stopPropagation","Loading","marginRight","TabBar","Tab","selected","TabContent","Tabs","tabs","currentTab","setCurrentTab","tabName","index","changeTab","InfoContainer","GenreContainer","SmallGenre","SeeMoreButton","MovieListItem","allowActions","genre_ids","genreId","genreObjects","g","onMovieClick","role","MovieList","emptyResponse","page","total_results","total_pages","useFetchMovies","movieQuery","setError","query","setMovies","fetch","post","MovieCardSkeleton","zIndex","MovieCard","setZIndex","layout","Gallery","MovieGallery","moviesOnDisplay","Array","from","n","FormField","StyledSelect","Select","colorStyles","control","option","isDisabled","isFocused","isSelected","cursor","multiValue","multiValueLabel","padding","multiValueRemove","MovieSearch","setGenres","setMovieQuery","genreOptions","allGenres","onFocus","isMulti","options","MovieSelection","ownerText","participantText","Selection","Matches","matches","PreviewButton","Details","SwipeItem","showPreview","LikeButton","DislikeButton","LikeIcon","HiHeart","DislikeIcon","RiCloseFill","SwiperCore","use","Pagination","A11y","EffectCoverflow","EffectFade","coverFlowEffectProps","rotate","stretch","depth","modifier","slideShadows","paginationProps","clickable","progressbarFillClass","SwipeArea","swiper","setSwiper","swiped","enableButtons","disableButtons","handleSwipeEmit","onSlidePrevTransitionStart","movieIndex","previousIndex","nextIndex","activeIndex","slideTo","update","updateProgress","onSlideNextTransitionStart","onSlidePrevTransitionEnd","onSlideNextTransitionEnd","onProgress","actualProgress","documentElement","setProperty","onInit","initialSlide","speed","observer","grabCursor","centeredSlides","spaceBetween","effect","coverflowEffect","pagination","Swiper","numMatches","num","App","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4083fbe3.chunk.js","sourcesContent":["import styled from 'styled-components';\r\n\r\nexport const Background = styled.main`\r\n    background: var(--blue-dark-bg);\r\n    color: var(--white);\r\n    flex: 1;\r\n`;\r\n","import { AddedMovie } from './movies';\r\n\r\nexport enum Stage {\r\n    SELECTION = 'selection',\r\n    SWIPER = 'swiper',\r\n    RESULTS = 'results',\r\n    NULL = 'null',\r\n}\r\n\r\nexport interface Room {\r\n    roomName: string | null;\r\n    roomId: string | null;\r\n    ownerId: string | null;\r\n    participants: Participant[];\r\n    movies: AddedMovie[];\r\n    stage: Stage;\r\n}\r\n\r\nexport interface Participant {\r\n    name: string;\r\n    id: string;\r\n    color: string;\r\n    ready?: boolean;\r\n}\r\n","import React from 'react';\r\nimport { Background } from './style';\r\n\r\ntype Props = {\r\n    children: React.ReactNode | React.ReactNode[];\r\n};\r\n\r\nconst AppContainer = ({ children }: Props) => {\r\n    return <Background>{children}</Background>;\r\n};\r\n\r\nexport default AppContainer;\r\n","export default __webpack_public_path__ + \"static/media/themoviedb-logo.caee7457.svg\";","import styled from 'styled-components';\r\n\r\nexport const Container = styled.footer<{ $display: boolean }>`\r\n    background: rgb(0 0 0 / 25%);\r\n    padding: 2rem;\r\n    display: ${(props) => (props.$display ? 'block' : 'none')};\r\n\r\n    @media (min-width: 600px) {\r\n        display: block;\r\n    }\r\n`;\r\n\r\nexport const InnerContainer = styled.div`\r\n    max-width: 1100px;\r\n    margin: auto;\r\n`;\r\n\r\nexport const TheMovieDB = styled.img`\r\n    height: 10.5px;\r\n    margin-left: 0.5rem;\r\n`;\r\n\r\nexport const Attribution = styled.p`\r\n    font-size: 0.85rem;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    color: var(--white-muted);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n`;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport TheMovieDBLogo from '../../assets/themoviedb-logo.svg';\r\nimport { Stage } from '../../types/room';\r\nimport { Attribution, Container, InnerContainer, TheMovieDB } from './style';\r\n\r\nconst Footer = () => {\r\n    const { pathname } = useLocation();\r\n    const showFooter =\r\n        pathname === '/' ||\r\n        pathname.includes('/create') ||\r\n        pathname.includes('/join') ||\r\n        pathname.includes(Stage.RESULTS);\r\n\r\n    return (\r\n        <Container $display={showFooter}>\r\n            <InnerContainer>\r\n                <Attribution>\r\n                    Powered by\r\n                    <a href=\"https://www.themoviedb.org/\" target=\"_blank\" rel=\"noreferrer\">\r\n                        <TheMovieDB src={TheMovieDBLogo} alt=\"The Movie DB.\" />\r\n                    </a>\r\n                </Attribution>\r\n            </InnerContainer>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Footer;\r\n","import io from 'socket.io-client';\r\n\r\nexport const socket = io({ reconnection: true });\r\n","import { socket } from '.';\r\nimport { AddedMovie } from '../types/movies';\r\nimport { SocketResponse } from '../types/socket';\r\nimport { Participant } from './../../../server/src/types/index';\r\n\r\nexport const createRoom = (\r\n    data: { roomId: string | null },\r\n    callback: (res: SocketResponse<{ roomId: string }>) => void,\r\n) => {\r\n    socket.emit('room:create', data, callback);\r\n};\r\n\r\nexport const checkRoom = (data: { roomId: string }, callback: (res: SocketResponse<{ roomId: string }>) => void) => {\r\n    socket.emit('room:check', data, callback);\r\n};\r\n\r\nexport const joinRoom = (\r\n    data: { roomId: string; user: Participant },\r\n    callback: (res: SocketResponse<{ roomId: string }>) => void,\r\n) => {\r\n    socket.emit('room:join', data, callback);\r\n};\r\n\r\nexport const changeRoomOwner = (data: { roomId: string; userId: string }) => {\r\n    socket.emit('room:owner-change', data);\r\n};\r\n\r\nexport const addMovie = (\r\n    data: { roomId: string; movie: AddedMovie },\r\n    callback: (res: SocketResponse<{ movieId: string }>) => void,\r\n) => {\r\n    socket.emit('movie:add', data, callback);\r\n};\r\n\r\nexport const removeMovie = (\r\n    data: { roomId: string; movieId: number },\r\n    callback: (res: SocketResponse<{ movieId: string }>) => void,\r\n) => {\r\n    socket.emit('movie:remove', data, callback);\r\n};\r\n\r\nexport const swipeMovie = (\r\n    data: { roomId: string; movieId: number; liked: boolean; user: Participant },\r\n    callback?: (res: SocketResponse<{ movieId: string }>) => void,\r\n) => {\r\n    socket.emit('movie:swipe', data, callback);\r\n};\r\n\r\nexport const toggleReady = (\r\n    data: { roomId: string; userId: string },\r\n    callback?: (res: SocketResponse<{ userId: string }>) => void,\r\n) => {\r\n    socket.emit('user:ready', data, callback);\r\n};\r\n\r\nexport const changeName = (data: { roomId: string; userId: string; name: string }) => {\r\n    socket.emit('user:name-change', data);\r\n};\r\n\r\nexport const startSwiper = (data: { roomId: string }, callback?: (res: SocketResponse<{ roomId: string }>) => void) => {\r\n    socket.emit('swiper:start', data, callback);\r\n};\r\n","import styled from 'styled-components';\r\n\r\nexport const MaxWidthContainer = styled.section`\r\n    max-width: 1100px;\r\n    margin: 0 auto;\r\n    padding: 3rem 1rem;\r\n\r\n    @media (min-width: 600px) {\r\n        padding: 4rem 1rem;\r\n    }\r\n\r\n    @media (min-width: 1100px) {\r\n        padding: 4rem 0rem;\r\n    }\r\n`;\r\n\r\nexport const FormPageContainer = styled(MaxWidthContainer)`\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n\r\n    h2 {\r\n        margin-bottom: 4rem;\r\n    }\r\n`;\r\n\r\nexport const StyledForm = styled.form`\r\n    label {\r\n        margin-bottom: 0.5rem;\r\n    }\r\n\r\n    input {\r\n        padding: 0.5rem;\r\n        border-radius: 4px;\r\n    }\r\n`;\r\n\r\nexport const ErrorMessage = styled.div`\r\n    margin-top: 0.5rem;\r\n    padding: 0.5rem;\r\n    background: var(--accent-light);\r\n    border-radius: 4px;\r\n    font-size: 0.875rem;\r\n`;\r\n\r\nexport const Title = styled.h1`\r\n    font-size: 2rem;\r\n    margin: 0 0 1rem;\r\n    font-family: 'Merienda One', 'Rubik', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',\r\n        'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\r\n`;\r\n\r\nexport const Subtitle = styled.h2`\r\n    font-size: 1rem;\r\n    font-weight: 400;\r\n    line-height: 1.4;\r\n    margin-bottom: 2rem;\r\n    color: var(--white-muted);\r\n`;\r\n\r\nexport const Button = styled.button`\r\n    padding: 1.5rem 1rem;\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    border-radius: 4px;\r\n    color: white;\r\n    cursor: pointer;\r\n`;\r\n\r\nexport const FormButton = styled(Button)<{ $disabled?: boolean }>`\r\n    width: 100%;\r\n    background: ${(props) => (props.$disabled ? '#808080' : 'var(--blue-action)')};\r\n    color: ${(props) => props.$disabled && '#cbc8c8'};\r\n    padding: 1rem 1.5rem;\r\n`;\r\n\r\nexport const FontWeight600 = styled.span`\r\n    font-weight: 600;\r\n`;\r\n","import { AddedMovie } from './movies';\r\nimport { Participant, Room, Stage } from './room';\r\n\r\nexport enum ActionType {\r\n    INITIALIZE_ROOM = 'initialize_room',\r\n    GET_ROOM = 'get_room',\r\n    JOIN = 'join',\r\n    LEAVE = 'leave',\r\n    CHANGE_OWNER = 'change_owner',\r\n    ADD_MOVIE = 'add_movie',\r\n    REMOVE_MOVIE = 'remove_movie',\r\n    SWIPE_MOVIE = 'swipe_movie',\r\n    TOGGLE_READY = 'toggle_ready',\r\n    SET_STAGE = 'set_stage',\r\n    USER_NAME_CHANGE = 'user_name_change',\r\n}\r\n\r\nexport interface GetRoomAction {\r\n    type: ActionType.GET_ROOM;\r\n    payload: { room: Room };\r\n}\r\n\r\nexport interface InitializeRoomAction {\r\n    type: ActionType.INITIALIZE_ROOM;\r\n    payload: { roomName: string; roomId: string; ownerId: string; participant: Participant };\r\n}\r\n\r\nexport interface JoinAction {\r\n    type: ActionType.JOIN;\r\n    payload: { participant: Participant };\r\n}\r\n\r\nexport interface LeaveAction {\r\n    type: ActionType.LEAVE;\r\n    payload: { id: string };\r\n}\r\n\r\nexport interface ChangeOwnerAction {\r\n    type: ActionType.CHANGE_OWNER;\r\n    payload: { ownerId: string };\r\n}\r\n\r\nexport interface AddMovieAction {\r\n    type: ActionType.ADD_MOVIE;\r\n    payload: { movie: AddedMovie };\r\n}\r\n\r\nexport interface RemoveMovieAction {\r\n    type: ActionType.REMOVE_MOVIE;\r\n    payload: { id: number };\r\n}\r\n\r\nexport interface SwipeMovieAction {\r\n    type: ActionType.SWIPE_MOVIE;\r\n    payload: { id: number; liked: boolean; user: Participant };\r\n}\r\n\r\nexport interface ToggleReadyAction {\r\n    type: ActionType.TOGGLE_READY;\r\n    payload: { id: string };\r\n}\r\n\r\nexport interface SetStageAction {\r\n    type: ActionType.SET_STAGE;\r\n    payload: { stage: Stage.SELECTION | Stage.SWIPER };\r\n}\r\n\r\nexport interface UserNameChangeAction {\r\n    type: ActionType.USER_NAME_CHANGE;\r\n    payload: { userId: string; name: string };\r\n}\r\n\r\nexport type Action =\r\n    | JoinAction\r\n    | LeaveAction\r\n    | ChangeOwnerAction\r\n    | AddMovieAction\r\n    | RemoveMovieAction\r\n    | SwipeMovieAction\r\n    | InitializeRoomAction\r\n    | GetRoomAction\r\n    | ToggleReadyAction\r\n    | SetStageAction\r\n    | UserNameChangeAction;\r\n","export default __webpack_public_path__ + \"static/media/poster_unavailable.0646537b.png\";","import toast from 'react-hot-toast';\r\nimport { Renderable, Toast, ToastOptions, ValueOrFunction } from 'react-hot-toast/dist/core/types';\r\nimport PosterUnavailable from '../assets/poster_unavailable.png';\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport const checkIfIncluded = (list: any[], object: { [key: string]: number | string }): boolean => {\r\n    if (!list.length) {\r\n        return false;\r\n    }\r\n\r\n    const key = Object.keys(object)[0];\r\n\r\n    return Boolean(list.find((element) => element[key] === object[key]));\r\n};\r\n\r\nexport const generateImageUrl = (imageSrc: string | null, width: 'w342' | 'w500'): string => {\r\n    if (!imageSrc) {\r\n        return PosterUnavailable;\r\n    }\r\n\r\n    return `https://image.tmdb.org/t/p/${width}${imageSrc}`;\r\n};\r\n\r\nexport enum ToastType {\r\n    Success = 'success',\r\n    Error = 'error',\r\n    Loading = 'loading',\r\n    Custom = 'custom',\r\n}\r\n\r\ninterface ToastParams {\r\n    type: ToastType;\r\n    message: ValueOrFunction<Renderable, Toast>;\r\n    duration?: number;\r\n    icon?: any;\r\n    id?: string;\r\n}\r\n\r\nexport const useToast = ({ type, message, duration, icon, id }: ToastParams) => {\r\n    const successOptions: ToastOptions = {\r\n        duration: duration || 2000,\r\n        style: {\r\n            backgroundColor: 'var(--blue-active)',\r\n            color: '#FFF',\r\n        },\r\n        icon,\r\n        iconTheme: {\r\n            primary: 'hsl(213deg 24% 53%)',\r\n            secondary: '#FFF',\r\n        },\r\n    };\r\n\r\n    const errorOptions: ToastOptions = {\r\n        duration: duration || 4000,\r\n        style: {\r\n            backgroundColor: 'hsl(0deg 56% 27%)',\r\n            color: '#FFF',\r\n        },\r\n        icon,\r\n        iconTheme: {\r\n            primary: '#a23636',\r\n            secondary: '#FFF',\r\n        },\r\n    };\r\n\r\n    const loadingOptions: ToastOptions = {\r\n        duration: duration || 30000,\r\n        style: {\r\n            backgroundColor: 'var(--blue-active)',\r\n            color: '#FFF',\r\n        },\r\n        icon,\r\n        iconTheme: {\r\n            primary: 'hsl(213deg 24% 53%)',\r\n            secondary: '#FFF',\r\n        },\r\n    };\r\n    switch (type) {\r\n        case 'success':\r\n            return toast.success(message, successOptions);\r\n        case 'error':\r\n            return toast.error(message, errorOptions);\r\n        case 'loading':\r\n            return toast.loading(message, loadingOptions);\r\n        case 'custom':\r\n            return toast(message, successOptions);\r\n        default:\r\n            return toast(message, successOptions);\r\n    }\r\n};\r\n","import React, { createContext, ReactNode, useContext, useEffect } from 'react';\r\nimport { useLocalStorage } from '../hooks/useLocalStorage';\r\nimport { socket } from '../sockets';\r\nimport { onConnection } from '../sockets/listeners';\r\nimport { Participant } from '../types/room';\r\n\r\ntype Props = {\r\n    children: ReactNode;\r\n};\r\n\r\ninterface ContextProps {\r\n    user: Participant;\r\n    setUser: (value: Participant) => void;\r\n}\r\nexport const UserContext = createContext<ContextProps>({ user: {} as Participant, setUser: () => ({}) });\r\n\r\nexport const useUser = () => {\r\n    return useContext(UserContext);\r\n};\r\n\r\nconst UserProvider = ({ children }: Props) => {\r\n    const [user, setUser] = useLocalStorage('user', {} as Participant);\r\n\r\n    useEffect(() => {\r\n        onConnection(() => {\r\n            if (!user.id) {\r\n                setUser({ name: user.name, color: user.color, id: socket.id });\r\n                socket.emit('user:new', { ...user, id: socket.id });\r\n            } else {\r\n                socket.emit('user:new', user);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    return <UserContext.Provider value={{ user, setUser }}>{children}</UserContext.Provider>;\r\n};\r\n\r\nexport default UserProvider;\r\n","import { useState } from 'react';\r\n\r\nexport const useLocalStorage = <T>(key: string, initialValue: T): [typeof initialValue, typeof setValue] => {\r\n    const [storedValue, setStoredValue] = useState(() => {\r\n        try {\r\n            const item = window.localStorage.getItem(key);\r\n            return item ? JSON.parse(item) : initialValue;\r\n        } catch (error) {\r\n            return initialValue;\r\n        }\r\n    });\r\n\r\n    const setValue = (value: T): void => {\r\n        try {\r\n            const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n            setStoredValue(valueToStore);\r\n            window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n        } catch (error) {}\r\n    };\r\n\r\n    return [storedValue, setValue];\r\n};\r\n","import { socket } from '.';\r\nimport { AddedMovie } from '../types/movies';\r\nimport { Room } from '../types/room';\r\nimport { Participant } from './../../../server/src/types/index';\r\n\r\nexport const onTest = () => {\r\n    return socket.on('test', () => {\r\n        console.log('this is a test');\r\n    });\r\n};\r\n\r\nexport const onConnection = (callback: (socketId: string) => void) => {\r\n    return socket.on('connect', callback);\r\n};\r\n\r\nexport const onParticipantJoin = (room: Room, callback: (user: Participant) => void) => {\r\n    return socket.on('room:new-join', (data: { socketId: string; user: Participant }) => {\r\n        socket.emit('room:send', { socketId: data.socketId, room });\r\n        callback(data.user);\r\n    });\r\n};\r\n\r\nexport const onParticipantLeave = (callback: (data: { socketId: string; newOwnerSocketId: string }) => void) => {\r\n    return socket.on('room:leave', callback);\r\n};\r\n\r\nexport const onRoomOwnerChange = (callback: (data: { newOwnerId: string }) => void) => {\r\n    return socket.on('room:owner-change', callback);\r\n};\r\n\r\nexport const onGetRoom = (callback: (data: { room: Room }) => void) => {\r\n    return socket.once('room:get', callback);\r\n};\r\n\r\nexport const onMovieAdd = (callback: (movie: AddedMovie) => void) => {\r\n    return socket.on('movie:add', (data: { movie: AddedMovie }) => {\r\n        callback(data.movie);\r\n    });\r\n};\r\n\r\nexport const onMovieRemove = (callback: (data: { movieId: number }) => void) => {\r\n    return socket.on('movie:remove', callback);\r\n};\r\n\r\nexport const onMovieSwipe = (callback: (data: { movieId: number; liked: boolean; user: Participant }) => void) => {\r\n    return socket.on('movie:swipe', callback);\r\n};\r\n\r\nexport const onToggleReady = (callback: (data: { userId: string }) => void) => {\r\n    return socket.on('user:ready', callback);\r\n};\r\n\r\nexport const onStartSwiper = (callback: (data: { roomId: string }) => void) => {\r\n    return socket.on('swiper:start', callback);\r\n};\r\n\r\nexport const onNameChange = (callback: (data: { userId: string; name: string }) => void) => {\r\n    return socket.on('user:name-change', callback);\r\n};\r\n","/* eslint-disable react/display-name */\r\nimport React, { createContext, ReactNode, useContext, useEffect, useReducer, useRef } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport { FaFilm, FaUser, FaUserCheck } from 'react-icons/fa';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Participant } from '../../../server/src/types';\r\nimport { socket } from '../sockets';\r\nimport { changeRoomOwner } from '../sockets/emitters';\r\nimport {\r\n    onGetRoom,\r\n    onMovieAdd,\r\n    onMovieRemove,\r\n    onMovieSwipe,\r\n    onNameChange,\r\n    onParticipantJoin,\r\n    onParticipantLeave,\r\n    onRoomOwnerChange,\r\n    onStartSwiper,\r\n    onToggleReady,\r\n} from '../sockets/listeners';\r\nimport { FontWeight600 } from '../styles';\r\nimport { Action, ActionType } from '../types/actions';\r\nimport { AddedMovie } from '../types/movies';\r\nimport { Room, Stage } from '../types/room';\r\nimport { ToastType, useToast } from '../utils';\r\nimport { useUser } from './UserContext';\r\n\r\ntype Props = {\r\n    children: ReactNode;\r\n};\r\n\r\nconst initialState: Room = {\r\n    roomName: null,\r\n    roomId: null,\r\n    ownerId: null,\r\n    participants: [],\r\n    movies: [],\r\n    stage: Stage.NULL,\r\n};\r\n\r\ninterface ContextProps {\r\n    room: Room;\r\n    dispatch: (action: Action) => void;\r\n}\r\nexport const RoomContext = createContext<ContextProps>({ room: initialState, dispatch: () => ({}) });\r\n\r\nexport const useRoom = () => {\r\n    return useContext(RoomContext);\r\n};\r\n\r\nconst reducer = (state: Room, action: Action): Room => {\r\n    switch (action.type) {\r\n        case ActionType.INITIALIZE_ROOM:\r\n            return {\r\n                ...initialState,\r\n                roomName: action.payload.roomName,\r\n                roomId: action.payload.roomId,\r\n                ownerId: action.payload.ownerId,\r\n                participants: [action.payload.participant],\r\n                stage: Stage.SELECTION,\r\n            };\r\n        case ActionType.GET_ROOM:\r\n            return {\r\n                ...action.payload.room,\r\n            };\r\n        case ActionType.JOIN:\r\n            const participants = [\r\n                ...state.participants.filter((p) => p.id !== action.payload.participant.id),\r\n                action.payload.participant,\r\n            ];\r\n            return { ...state, participants };\r\n        case ActionType.LEAVE:\r\n            return {\r\n                ...state,\r\n                participants: state.participants.filter((p) => p.id !== action.payload.id),\r\n            };\r\n        case ActionType.CHANGE_OWNER:\r\n            return {\r\n                ...state,\r\n                ownerId: action.payload.ownerId,\r\n            };\r\n        case ActionType.ADD_MOVIE:\r\n            return {\r\n                ...state,\r\n                movies: [...state.movies.filter((m) => m.id !== action.payload.movie.id), action.payload.movie],\r\n            };\r\n        case ActionType.REMOVE_MOVIE:\r\n            return { ...state, movies: state.movies.filter((m) => m.id !== action.payload.id) };\r\n        case ActionType.SWIPE_MOVIE:\r\n            const swipedMovie = state.movies.find((m) => m.id === action.payload.id) as AddedMovie;\r\n            const alreadySwiped = swipedMovie.swipes.find((swipe) => swipe.user.id === action.payload.user.id);\r\n            const updatedSwipes = alreadySwiped\r\n                ? swipedMovie.swipes.map((swipe) =>\r\n                      swipe.user.id === action.payload.user.id ? { ...swipe, liked: action.payload.liked } : swipe,\r\n                  )\r\n                : [...swipedMovie.swipes, { user: action.payload.user, liked: action.payload.liked }];\r\n            const updatedMovie: AddedMovie = { ...swipedMovie, swipes: updatedSwipes };\r\n            return {\r\n                ...state,\r\n                movies: state.movies.map((m) => (m.id === updatedMovie.id ? updatedMovie : m)),\r\n            };\r\n        case ActionType.SET_STAGE:\r\n            return { ...state, stage: action.payload.stage };\r\n        case ActionType.TOGGLE_READY:\r\n            return {\r\n                ...state,\r\n                participants: state.participants.map((p) =>\r\n                    p.id === action.payload.id ? { ...p, ready: !p.ready } : p,\r\n                ),\r\n            };\r\n        case ActionType.USER_NAME_CHANGE:\r\n            return {\r\n                ...state,\r\n                participants: state.participants.map((p) =>\r\n                    p.id === action.payload.userId ? { ...p, name: action.payload.name } : p,\r\n                ),\r\n            };\r\n        default:\r\n            throw new Error('Action not defined.');\r\n    }\r\n};\r\n\r\nconst LS_KEY = 'rooms';\r\n\r\nconst RoomProvider = ({ children }: Props) => {\r\n    const { pathname } = useLocation();\r\n    const { user } = useUser();\r\n    const [room, dispatch] = useReducer(reducer, initialState, getLocalStorage);\r\n    const toastId = useRef<string>();\r\n    const toastTimeoutId = useRef<number>();\r\n    const changeOwnerTimeoutId = useRef<number>();\r\n\r\n    function getLSRooms(): { [key: string]: Room } | null {\r\n        const item = localStorage.getItem(LS_KEY);\r\n        if (!item) return null;\r\n        return JSON.parse(item);\r\n    }\r\n\r\n    function getLocalStorage(initialState: Room) {\r\n        const item = localStorage.getItem(LS_KEY);\r\n        if (!item) return initialState;\r\n\r\n        const rooms: { [key: string]: Room } = JSON.parse(item);\r\n        const roomIdParam = pathname.split('/').filter(Boolean)[1];\r\n        const room = rooms[roomIdParam];\r\n        return room ? room : initialState;\r\n    }\r\n\r\n    function setLocalStorage(rooms: { [key: string]: Room }) {\r\n        localStorage.setItem(LS_KEY, JSON.stringify(rooms));\r\n    }\r\n\r\n    useEffect(() => {\r\n        const rooms = getLSRooms();\r\n        if (room.roomId) {\r\n            const updatedRooms = { ...rooms, [room.roomId as string]: room };\r\n            setLocalStorage(updatedRooms);\r\n        }\r\n    }, [room]);\r\n\r\n    useEffect(() => {\r\n        onParticipantJoin(room, (newParticipant) => {\r\n            if (newParticipant.id === room.ownerId) {\r\n                clearTimeout(changeOwnerTimeoutId.current);\r\n            }\r\n            useToast({\r\n                type: ToastType.Success,\r\n                message: () => (\r\n                    <span>\r\n                        <FontWeight600>{newParticipant.name}</FontWeight600> {' joined.'}\r\n                    </span>\r\n                ),\r\n                icon: <FaUser />,\r\n            });\r\n            dispatch({ type: ActionType.JOIN, payload: { participant: { ...newParticipant, ready: false } } });\r\n        });\r\n        onParticipantLeave(({ socketId, newOwnerSocketId }) => {\r\n            dispatch({ type: ActionType.LEAVE, payload: { id: socketId } });\r\n            if (socketId === room.ownerId && newOwnerSocketId === socket.id) {\r\n                changeOwnerTimeoutId.current = window.setTimeout(() => {\r\n                    changeRoomOwner({ roomId: room.roomId as string, userId: user.id });\r\n                }, 10000);\r\n            }\r\n        });\r\n        onRoomOwnerChange(({ newOwnerId }) => {\r\n            dispatch({ type: ActionType.CHANGE_OWNER, payload: { ownerId: newOwnerId } });\r\n            if (newOwnerId === user.id) {\r\n                useToast({\r\n                    type: ToastType.Custom,\r\n                    message: () => (\r\n                        <span>\r\n                            You are the new room owner. <br />\r\n                            Tap on <FontWeight600>Start Swiping</FontWeight600> to begin.\r\n                        </span>\r\n                    ),\r\n                    duration: 8000,\r\n                });\r\n            }\r\n        });\r\n        onGetRoom(({ room }) => {\r\n            const user: Participant = JSON.parse(localStorage.getItem('user') || '');\r\n            /* Remove duplicate user */\r\n            let participants: Participant[] = room.participants.filter((p) => p.id !== user.id);\r\n            if (user) {\r\n                participants = [...participants, { ...user, ready: false } as Participant];\r\n            }\r\n            dispatch({ type: ActionType.GET_ROOM, payload: { room: { ...room, participants } } });\r\n        });\r\n        onMovieAdd((movie) => {\r\n            const addedByOtherUser = movie.addedByUserId !== user.id;\r\n            if (addedByOtherUser) {\r\n                useToast({\r\n                    type: ToastType.Success,\r\n                    message: () => (\r\n                        <span>\r\n                            Someone added <FontWeight600>{movie.title}</FontWeight600>.\r\n                        </span>\r\n                    ),\r\n                    icon: <FaFilm />,\r\n                });\r\n            }\r\n            dispatch({ type: ActionType.ADD_MOVIE, payload: { movie } });\r\n        });\r\n        onMovieRemove(({ movieId }) => {\r\n            dispatch({ type: ActionType.REMOVE_MOVIE, payload: { id: movieId } });\r\n        });\r\n        onMovieSwipe(({ movieId, liked, user }) => {\r\n            dispatch({ type: ActionType.SWIPE_MOVIE, payload: { id: movieId, liked, user } });\r\n        });\r\n        onToggleReady(({ userId }) => {\r\n            const userToToggle = room.participants.find((p) => p.id === userId);\r\n            if (userToToggle && !userToToggle.ready && user.id !== userToToggle.id) {\r\n                useToast({\r\n                    type: ToastType.Success,\r\n                    message: () => (\r\n                        <span>\r\n                            <FontWeight600>{userToToggle.name}</FontWeight600> is ready.\r\n                        </span>\r\n                    ),\r\n                    icon: <FaUserCheck />,\r\n                });\r\n            }\r\n            dispatch({ type: ActionType.TOGGLE_READY, payload: { id: userId } });\r\n        });\r\n        onStartSwiper(({ roomId }) => {\r\n            if (roomId !== room.roomId) return;\r\n            dispatch({ type: ActionType.SET_STAGE, payload: { stage: Stage.SWIPER } });\r\n        });\r\n        onNameChange(({ userId, name }) => {\r\n            const affectedUser = room.participants.find((p) => p.id === userId);\r\n            if (affectedUser && affectedUser.id !== user.id) {\r\n                const oldName = affectedUser?.name;\r\n                useToast({\r\n                    type: ToastType.Success,\r\n                    message: () => (\r\n                        <span>\r\n                            <FontWeight600>{oldName}</FontWeight600> {' has changed their name to '}{' '}\r\n                            <FontWeight600>{name}.</FontWeight600>\r\n                        </span>\r\n                    ),\r\n                });\r\n            }\r\n            dispatch({ type: ActionType.USER_NAME_CHANGE, payload: { userId, name } });\r\n        });\r\n\r\n        return () => {\r\n            socket.removeAllListeners();\r\n        };\r\n    }, [socket, room, dispatch]);\r\n\r\n    useEffect(() => {\r\n        const isOwner = user.id === room.ownerId;\r\n        const participants = room.participants.filter((p) => p.id !== user.id);\r\n        const everyoneReady = participants.length > 0 && participants.every((p) => p.ready);\r\n        if (!everyoneReady && toastTimeoutId.current) {\r\n            clearTimeout(toastTimeoutId.current);\r\n            toast.dismiss(toastId.current);\r\n        }\r\n        if (isOwner && everyoneReady) {\r\n            toastTimeoutId.current = window.setTimeout(\r\n                () =>\r\n                    (toastId.current = useToast({\r\n                        type: ToastType.Success,\r\n                        message: () => (\r\n                            <span>\r\n                                Everyone is ready to start.\r\n                                <br />\r\n                                Tap on <FontWeight600>Start Swiping.</FontWeight600>\r\n                            </span>\r\n                        ),\r\n                        duration: 99999,\r\n                    })),\r\n                2500,\r\n            );\r\n        }\r\n    }, [room.participants]);\r\n\r\n    useEffect(() => {\r\n        clearTimeout(toastTimeoutId.current);\r\n        if (toastId.current) {\r\n            toast.dismiss(toastId.current);\r\n        }\r\n    }, [pathname]);\r\n\r\n    return <RoomContext.Provider value={{ room, dispatch }}>{children}</RoomContext.Provider>;\r\n};\r\n\r\nexport default RoomProvider;\r\n","import { useLayoutEffect, useState } from 'react';\r\n\r\nconst useViewportWidth = () => {\r\n    const [width, setWidth] = useState(0);\r\n    useLayoutEffect(() => {\r\n        function updateSize() {\r\n            setWidth(window.innerWidth);\r\n        }\r\n        window.addEventListener('resize', updateSize);\r\n        updateSize();\r\n        return () => window.removeEventListener('resize', updateSize);\r\n    }, []);\r\n    return { width };\r\n};\r\n\r\nexport default useViewportWidth;\r\n","import React from 'react';\r\nimport Rodal from 'rodal';\r\nimport 'rodal/lib/rodal.css';\r\n\r\ninterface Props {\r\n    children: JSX.Element | JSX.Element[] | Element | Element[];\r\n    visible: boolean;\r\n    onClose?: () => void;\r\n    width?: number | string;\r\n    maxWidth?: number | string;\r\n    height?: number | string;\r\n}\r\n\r\nconst Modal = ({ visible, onClose, width = '90%', maxWidth = 500, height = 500, children }: Props) => {\r\n    const styles = {\r\n        height,\r\n        width,\r\n        maxWidth,\r\n        background: 'var(--blue-active)',\r\n        borderRadius: '8px',\r\n    };\r\n\r\n    return (\r\n        <Rodal visible={visible} onClose={onClose} closeOnEsc={true} customStyles={styles} animation=\"slideUp\">\r\n            {children}\r\n        </Rodal>\r\n    );\r\n};\r\n\r\nexport default Modal;\r\n","import { FaUserCircle } from 'react-icons/fa';\r\nimport { NavLink } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { Button } from '../../styles';\r\n\r\nexport const Container = styled.nav`\r\n    background: rgb(0 0 0 / 25%);\r\n    padding: 1rem;\r\n\r\n    @media screen and (min-width: 700px) {\r\n        padding: 1.5rem 1rem;\r\n    }\r\n`;\r\n\r\nexport const InnerContainer = styled.div`\r\n    max-width: 1100px;\r\n    margin: auto;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n`;\r\n\r\nexport const Logo = styled.div`\r\n    color: var(--white);\r\n    font-size: 1.25rem;\r\n    font-family: 'Merienda One', 'Rubik', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',\r\n        'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\r\n`;\r\n\r\nexport const NavContainer = styled.section``;\r\n\r\nexport const NavLinks = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    list-style: none;\r\n\r\n    & > *:not(:last-child) {\r\n        margin-right: 0.75rem;\r\n    }\r\n\r\n    @media screen and (min-width: 450px) {\r\n        & > *:not(:last-child) {\r\n            margin-right: 1.5rem;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const StyledLink = styled(NavLink)<{ $active: boolean }>`\r\n    font-weight: ${(props) => props.$active && 700};\r\n`;\r\n\r\nexport const UserButton = styled.button`\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n\r\n    span {\r\n        margin-right: 0.75rem;\r\n    }\r\n`;\r\n\r\nexport const UserIcon = styled(FaUserCircle)`\r\n    font-size: 1.25rem;\r\n    width: 20px;\r\n`;\r\n\r\nexport const ModalContent = styled.section`\r\n    padding: 0 1rem;\r\n\r\n    h2 {\r\n        font-size: 1.5rem;\r\n        font-weight: 600;\r\n        margin-bottom: 1rem;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n`;\r\n\r\nexport const InputGroup = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-bottom: 2rem;\r\n`;\r\n\r\nexport const ChangeButton = styled(Button)`\r\n    background: var(--blue-action);\r\n    padding: 0.75rem 1rem;\r\n    width: 100%;\r\n`;\r\n","/* eslint-disable react/display-name */\r\nimport React, { useState } from 'react';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport { useRoom } from '../../context/RoomContext';\r\nimport { useUser } from '../../context/UserContext';\r\nimport useViewportWidth from '../../hooks/useViewportWidth';\r\nimport { changeName } from '../../sockets/emitters';\r\nimport { FontWeight600, StyledForm } from '../../styles';\r\nimport { ToastType, useToast } from '../../utils';\r\nimport Modal from '../Modal';\r\nimport {\r\n    ChangeButton,\r\n    Container,\r\n    InnerContainer,\r\n    InputGroup,\r\n    Logo,\r\n    ModalContent,\r\n    NavContainer,\r\n    NavLinks,\r\n    StyledLink,\r\n    UserButton,\r\n    UserIcon,\r\n} from './style';\r\n\r\ninterface Props {\r\n    forceShow?: boolean;\r\n}\r\n\r\nconst Nav = ({ forceShow: show }: Props) => {\r\n    const { width } = useViewportWidth();\r\n    const { room } = useRoom();\r\n    const { user, setUser } = useUser();\r\n    const { pathname } = useLocation();\r\n    const [visible, setVisible] = useState(false);\r\n    const [newName, setNewName] = useState(user.name);\r\n    const username = user.name?.length > 8 ? `${user.name.slice(0, 8)}...` : user.name;\r\n\r\n    const closeModal = () => {\r\n        setVisible(false);\r\n    };\r\n\r\n    const confirmNameChange = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setUser({ ...user, name: newName });\r\n        closeModal();\r\n        useToast({\r\n            type: ToastType.Success,\r\n            message: () => (\r\n                <span>\r\n                    {'Name changed to'} <FontWeight600>{newName}.</FontWeight600>\r\n                </span>\r\n            ),\r\n        });\r\n\r\n        if (room.roomId) {\r\n            changeName({ roomId: room.roomId, userId: user.id, name: newName });\r\n        }\r\n    };\r\n\r\n    if (pathname === '/' && !show) return null;\r\n\r\n    return (\r\n        <Container>\r\n            <InnerContainer>\r\n                <Logo>\r\n                    <NavLink to=\"/\">Movie Swiper </NavLink>\r\n                </Logo>\r\n                <NavContainer>\r\n                    <NavLinks>\r\n                        <StyledLink $active={pathname.includes('create')} to=\"/create\">\r\n                            Create\r\n                        </StyledLink>\r\n                        {room.roomId && (\r\n                            <StyledLink\r\n                                to={`/${room.stage}/${room.roomId}`}\r\n                                activeStyle={{\r\n                                    fontWeight: 700,\r\n                                }}\r\n                                $active={['selection', 'swiper', 'results'].includes(\r\n                                    pathname.split('/').filter(Boolean)[0],\r\n                                )}\r\n                            >\r\n                                Room\r\n                            </StyledLink>\r\n                        )}\r\n                        {user.name && (\r\n                            <UserButton onClick={() => setVisible(true)}>\r\n                                {width > 450 && <span>{username}</span>}\r\n                                <UserIcon />\r\n                            </UserButton>\r\n                        )}\r\n                    </NavLinks>\r\n                </NavContainer>\r\n            </InnerContainer>\r\n            <Modal visible={visible} onClose={closeModal} height={225} maxWidth={400}>\r\n                <ModalContent>\r\n                    <h2>Change name</h2>\r\n                    <StyledForm onSubmit={confirmNameChange}>\r\n                        <InputGroup>\r\n                            <label htmlFor=\"newName\">Name</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"newName\"\r\n                                id=\"newName\"\r\n                                value={newName}\r\n                                onChange={(e) => setNewName(e.target.value)}\r\n                            />\r\n                        </InputGroup>\r\n                        <ChangeButton type=\"submit\">Change name</ChangeButton>\r\n                    </StyledForm>\r\n                </ModalContent>\r\n            </Modal>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Nav;\r\n","import styled, { keyframes } from 'styled-components';\r\nimport { MaxWidthContainer } from '../../styles';\r\nimport { Title } from './../../styles/index';\r\n\r\nexport const Container = styled(MaxWidthContainer)`\r\n    height: 500px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nexport const Text = styled(Title)`\r\n    text-align: center;\r\n    font-size: 1.125rem;\r\n    margin-bottom: 1rem;\r\n`;\r\n\r\nconst dotsAnimation = keyframes`\r\n20%{background-position:0%   0%, 50%  50%,100%  50%}\r\n    40%{background-position:0% 100%, 50%   0%,100%  50%}\r\n    60%{background-position:0%  50%, 50% 100%,100%   0%}\r\n    80%{background-position:0%  50%, 50%  50%,100% 100%}\r\n`;\r\n\r\nexport const LoadingDots = styled.div`\r\n    width: 60px;\r\n    height: 24px;\r\n    background: radial-gradient(circle closest-side, currentColor 90%, #0000) 0% 50%,\r\n        radial-gradient(circle closest-side, currentColor 90%, #0000) 50% 50%,\r\n        radial-gradient(circle closest-side, currentColor 90%, #0000) 100% 50%;\r\n    background-size: calc(100% / 3) 12px;\r\n    background-repeat: no-repeat;\r\n    animation: ${dotsAnimation} 1s infinite linear;\r\n`;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { RouteProps, useHistory } from 'react-router-dom';\r\nimport { useRoom } from '../../context/RoomContext';\r\nimport { useUser } from '../../context/UserContext';\r\nimport { checkRoom, createRoom, joinRoom } from '../../sockets/emitters';\r\nimport { ActionType } from '../../types/actions';\r\nimport { Stage } from '../../types/room';\r\nimport * as S from './style';\r\n\r\ninterface Props {\r\n    component: React.ElementType;\r\n    computedMatch?: any;\r\n    location?: RouteProps['location'];\r\n    path?: RouteProps['path'];\r\n}\r\n\r\nconst ProtectedRoute = ({ component: Component, computedMatch, ...rest }: Props) => {\r\n    const { room, dispatch } = useRoom();\r\n    const { user } = useUser();\r\n    const history = useHistory();\r\n    const [status, setStatus] = useState<'loading' | 'error' | 'success'>('loading');\r\n    const roomId = computedMatch.params.id;\r\n    const path = computedMatch.url.split('/')[1];\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (!roomId) return history.replace('/expired');\r\n            /* Check if room exists */\r\n            checkRoom({ roomId }, (res) => {\r\n                if (res.success) {\r\n                    /* If username is already set, join room */\r\n                    if (user.name) {\r\n                        joinRoom({ roomId, user }, (res) => {\r\n                            if (res.success) {\r\n                                setStatus('success');\r\n                            } else {\r\n                                setStatus('error');\r\n                            }\r\n                        });\r\n                        /* If username is not set, go to Join screen to set it */\r\n                    } else {\r\n                        return history.replace(`/join/${roomId}`);\r\n                    }\r\n                } else {\r\n                    if (!room.roomId) return history.replace('/create');\r\n\r\n                    createRoom({ roomId }, (res) => {\r\n                        if (!res.success) return;\r\n\r\n                        dispatch({\r\n                            type: ActionType.GET_ROOM,\r\n                            payload: { room },\r\n                        });\r\n                        return history.push(`/selection/${roomId}`);\r\n                    });\r\n                }\r\n            });\r\n            setStatus('success');\r\n        } catch (error) {\r\n            console.log(error);\r\n            setStatus('error');\r\n        }\r\n    }, [computedMatch.params.id]);\r\n\r\n    useEffect(() => {\r\n        const swipedAll =\r\n            room.movies.length > 0 &&\r\n            room.movies.every((movie) => movie.swipes.find((swipe) => swipe.user.id === user.id));\r\n        if (room.roomId && swipedAll) {\r\n            history.replace(`/${Stage.RESULTS}/${roomId}`);\r\n            return;\r\n        }\r\n\r\n        if (room.roomId && path !== room.stage) {\r\n            history.replace(`/${room.stage}/${roomId}`);\r\n        }\r\n    }, [room.stage]);\r\n\r\n    if (status === 'loading') {\r\n        return (\r\n            <S.Container>\r\n                <S.Text>Joining room</S.Text>\r\n                <S.LoadingDots />\r\n            </S.Container>\r\n        );\r\n    }\r\n\r\n    if (status === 'error') {\r\n        return (\r\n            <S.Container>\r\n                <S.Text>Could not join room. Refresh the page to try again.</S.Text>\r\n            </S.Container>\r\n        );\r\n    }\r\n\r\n    return <Component {...computedMatch} {...rest} />;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { createContext, useContext, useState } from 'react';\r\nimport { ReactNode } from 'react';\r\nimport { Movie } from '../types/movies';\r\n\r\ntype Props = {\r\n    children: ReactNode;\r\n};\r\n\r\ninterface ContextProps {\r\n    moviePreview: Movie | null;\r\n    setMoviePreview: (value: Movie | null) => void;\r\n}\r\nexport const MoviePreviewContext = createContext<ContextProps>({\r\n    moviePreview: null,\r\n    setMoviePreview: () => ({}),\r\n});\r\n\r\nexport const useMoviePreview = () => {\r\n    return useContext(MoviePreviewContext);\r\n};\r\n\r\nconst MoviePreviewProvider = ({ children }: Props) => {\r\n    const [moviePreview, setMoviePreview] = useState<Movie | null>(null);\r\n\r\n    return (\r\n        <MoviePreviewContext.Provider value={{ moviePreview, setMoviePreview }}>\r\n            {children}\r\n        </MoviePreviewContext.Provider>\r\n    );\r\n};\r\n\r\nexport default MoviePreviewProvider;\r\n","import styled from 'styled-components';\r\n\r\nexport const InputGroup = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-bottom: 1rem;\r\n\r\n    &:last-of-type {\r\n        margin-bottom: 4rem;\r\n    }\r\n`;\r\n","import randomColor from 'randomcolor';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport { socket } from '../../../sockets';\r\nimport { createRoom } from '../../../sockets/emitters';\r\nimport { ErrorMessage, FormButton, StyledForm } from '../../../styles';\r\nimport { ActionType } from '../../../types/actions';\r\nimport { InputGroup } from './style';\r\n\r\ninterface Errors {\r\n    name?: string;\r\n    roomName?: string;\r\n}\r\n\r\nconst CreateForm = () => {\r\n    const history = useHistory();\r\n    const { room, dispatch } = useRoom();\r\n    const { user, setUser } = useUser();\r\n    const initialInputs = {\r\n        name: user.name || '',\r\n        roomName: '',\r\n    };\r\n    const [disabled, setDisabled] = useState(false);\r\n    const [inputs, setInputs] = useState(initialInputs);\r\n    const [touched, setTouched] = useState<Errors>({});\r\n    const [submitted, setSubmitted] = useState(false);\r\n\r\n    const errors = getErrors();\r\n    const isFormValid = !Object.keys(errors).length;\r\n\r\n    const initializeRoomAndUser = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setSubmitted(true);\r\n\r\n        if (!isFormValid) return;\r\n\r\n        setDisabled(true);\r\n        if (room.roomId) {\r\n            socket.disconnect();\r\n            socket.connect();\r\n        }\r\n\r\n        const newUser = {\r\n            ...user,\r\n            name: inputs.name,\r\n            color: randomColor({\r\n                luminosity: 'light',\r\n                hue: 'blue',\r\n            }),\r\n        };\r\n        setUser(newUser);\r\n        createRoom({ roomId: null }, (res) => {\r\n            if (!res.success) {\r\n                return;\r\n            }\r\n\r\n            const roomId = res.data.roomId;\r\n            dispatch({\r\n                type: ActionType.INITIALIZE_ROOM,\r\n                payload: { roomName: inputs.roomName, roomId, ownerId: newUser.id, participant: newUser },\r\n            });\r\n            history.push(`/selection/${roomId}`);\r\n        });\r\n    };\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setInputs((inputs) => ({ ...inputs, [name]: value }));\r\n    };\r\n\r\n    const onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\r\n        const { name } = e.target;\r\n        setTouched((touched) => ({ ...touched, [name]: true }));\r\n    };\r\n\r\n    function getErrors() {\r\n        const errors: Errors = {};\r\n        if (!inputs.name) errors.name = 'Name is required.';\r\n        // if (!inputs.roomName) errors.roomName = 'Group name is required.';\r\n\r\n        return errors;\r\n    }\r\n\r\n    return (\r\n        <StyledForm onSubmit={initializeRoomAndUser}>\r\n            <InputGroup>\r\n                <label htmlFor=\"name\">Your name</label>\r\n                <input type=\"text\" name=\"name\" id=\"name\" value={inputs.name} onChange={onChange} onBlur={onBlur} />\r\n                {(touched.name || submitted) && errors.name && <ErrorMessage>{errors.name}</ErrorMessage>}\r\n            </InputGroup>\r\n            {/* <InputGroup>\r\n                <label htmlFor=\"roomName\">Group name</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"roomName\"\r\n                    id=\"roomName\"\r\n                    value={inputs.roomName}\r\n                    onChange={onChange}\r\n                    onBlur={onBlur}\r\n                />\r\n                {(touched.roomName || submitted) && errors.roomName && <ErrorMessage>{errors.roomName}</ErrorMessage>}\r\n            </InputGroup> */}\r\n            <FormButton $disabled={disabled} disabled={disabled}>\r\n                Get Started\r\n            </FormButton>\r\n        </StyledForm>\r\n    );\r\n};\r\n\r\nexport default CreateForm;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport { FormPageContainer, Subtitle, Title } from '../../../styles';\r\nimport CreateForm from '../CreateForm';\r\n\r\nconst Create = () => {\r\n    return (\r\n        <FormPageContainer>\r\n            <Helmet>\r\n                <title>Create | Movie Swiper</title>\r\n            </Helmet>\r\n            <Title>Create New Room</Title>\r\n            <Subtitle>Enter your name before proceeding to movie selection.</Subtitle>\r\n            <CreateForm />\r\n        </FormPageContainer>\r\n    );\r\n};\r\n\r\nexport default Create;\r\n","import styled from 'styled-components';\r\nimport { MaxWidthContainer } from '../../../styles';\r\n\r\nexport const Container = styled(MaxWidthContainer)``;\r\n","import React from 'react';\r\nimport { Container } from './style';\r\nimport { Subtitle, Title } from '../../../styles/index';\r\n\r\nconst Expired = () => {\r\n    return (\r\n        <Container>\r\n            <Title>Not Found</Title>\r\n            <Subtitle>Sorry, the room you&apos;re trying to join does not exist or has expired.</Subtitle>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Expired;\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.article`\r\n    padding: 1.5rem;\r\n    background-color: var(--blue-active);\r\n    border-radius: 4px;\r\n    box-shadow: 0px 5px 15px 5px rgb(24 38 53 / 55%);\r\n`;\r\n\r\nexport const Headline = styled.h3`\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    color: var(--gray);\r\n    font-weight: 400;\r\n    font-size: 0.875rem;\r\n    margin-bottom: 0.5rem;\r\n    display: flex;\r\n    align-items: center;\r\n`;\r\n\r\nexport const Body = styled.p`\r\n    line-height: 1.5;\r\n    @media screen and (min-width: 500px) {\r\n        font-size: 1.125rem;\r\n    }\r\n`;\r\n","import React from 'react';\r\nimport * as S from './style';\r\n\r\ninterface Prop {\r\n    children: React.ReactNode;\r\n}\r\n\r\nconst Headline = ({ children }: Prop) => <S.Headline>{children}</S.Headline>;\r\nconst Body = ({ children }: Prop) => <S.Body>{children}</S.Body>;\r\n\r\nconst Instruction = ({ children }: Prop) => {\r\n    const headline = React.Children.toArray(children).filter(\r\n        (child) => React.isValidElement(child) && child.type === Headline,\r\n    );\r\n    const body = React.Children.toArray(children).filter((child) => React.isValidElement(child) && child.type === Body);\r\n\r\n    return (\r\n        <S.Container>\r\n            {headline}\r\n            {body}\r\n        </S.Container>\r\n    );\r\n};\r\n\r\nInstruction.Headline = Headline;\r\nInstruction.Body = Body;\r\n\r\nexport default Instruction;\r\n","import { FaFilm, FaPollH, FaUsers } from 'react-icons/fa';\r\nimport styled, { css } from 'styled-components';\r\n\r\nexport const Grid = styled.section`\r\n    max-width: 1100px;\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    grid-gap: 1rem;\r\n    margin: 4rem 1.5rem;\r\n    position: relative;\r\n    z-index: 3;\r\n    position: relative;\r\n\r\n    &::after {\r\n        content: '';\r\n        position: absolute;\r\n        height: 2px;\r\n        background: var(--blue-muted);\r\n        width: 100%;\r\n        bottom: -4rem;\r\n        left: 0;\r\n    }\r\n\r\n    @media screen and (min-width: 750px) {\r\n        grid-template-columns: repeat(3, 1fr);\r\n        grid-gap: 2rem;\r\n        margin-top: -5rem;\r\n    }\r\n\r\n    @media screen and (min-width: 1100px) {\r\n        margin: -5rem auto 4rem auto;\r\n    }\r\n`;\r\n\r\nconst iconStyles = css`\r\n    font-size: 1.25rem;\r\n    margin-right: 0.75rem;\r\n`;\r\n\r\nexport const UsersIcon = styled(FaUsers)`\r\n    ${iconStyles}\r\n    margin-right: 0.5rem;\r\n`;\r\n\r\nexport const FilmIcon = styled(FaFilm)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const PollIcon = styled(FaPollH)`\r\n    ${iconStyles}\r\n`;\r\n","import React from 'react';\r\nimport Instruction from '../Instruction';\r\nimport * as S from './style';\r\n\r\nconst instructions = [\r\n    {\r\n        headline: 'Invite your friends',\r\n        body: 'Create a room, copy the link and share it with others.',\r\n        icon: <S.UsersIcon />,\r\n    },\r\n    {\r\n        headline: 'Pick your movies',\r\n        body: 'Browse by genre or find the exact movie you have in mind, then add it to the shared list.',\r\n        icon: <S.FilmIcon />,\r\n    },\r\n    {\r\n        headline: 'Swipe to vote',\r\n        body: (\r\n            <>\r\n                Like a movie? Swipe right. <br />\r\n                Dislike a movie? Swipe left.\r\n            </>\r\n        ),\r\n        icon: <S.PollIcon />,\r\n    },\r\n];\r\n\r\nconst Explainer = () => {\r\n    return (\r\n        <S.Grid>\r\n            {instructions.map((i) => (\r\n                <Instruction key={i.headline}>\r\n                    <Instruction.Headline>\r\n                        {i.icon} {i.headline}\r\n                    </Instruction.Headline>\r\n                    <Instruction.Body>{i.body}</Instruction.Body>\r\n                </Instruction>\r\n            ))}\r\n        </S.Grid>\r\n    );\r\n};\r\n\r\nexport default Explainer;\r\n","import { RiInformationLine } from 'react-icons/ri';\r\nimport styled from 'styled-components';\r\n\r\nexport const Button = styled.button`\r\n    width: 225px;\r\n    padding: 1rem 1rem 0;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    background-color: var(--blue-active);\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n\r\nexport const Image = styled.img`\r\n    display: block;\r\n    object-fit: cover;\r\n    height: 100%;\r\n    width: 100%;\r\n    border-radius: 4px;\r\n`;\r\n\r\nexport const ButtonSection = styled.div`\r\n    padding: 1rem 0;\r\n    background: var(--blue-active);\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    text-align: center;\r\n    border-radius: 0 0 4px 4px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n`;\r\n\r\nexport const InfoIcon = styled(RiInformationLine)`\r\n    font-size: 1.25rem;\r\n    margin-right: 0.5rem;\r\n`;\r\n","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useMoviePreview } from '../../../context/MoviePreviewContext';\r\nimport { Movie } from '../../../types/movies';\r\nimport { generateImageUrl } from '../../../utils';\r\nimport * as S from './style';\r\n\r\nconst placeholderMovie = {\r\n    adult: false,\r\n    backdrop_path: '/inJjDhCjfhh3RtrJWBmmDqeuSYC.jpg',\r\n    genre_ids: [28, 878],\r\n    id: 399566,\r\n    original_language: 'en',\r\n    original_title: 'Godzilla vs. Kong',\r\n    overview:\r\n        'In a time when monsters walk the Earth, humanity’s fight for its future sets Godzilla and Kong on a collision course that will see the two most powerful forces of nature on the planet collide in a spectacular battle for the ages.',\r\n    popularity: 4459.297,\r\n    poster_path: '/pgqgaUx1cJb5oZQQ5v0tNARCeBp.jpg',\r\n    release_date: '2021-03-24',\r\n    title: 'Godzilla vs. Kong',\r\n    video: false,\r\n    vote_average: 8.3,\r\n    vote_count: 4838,\r\n};\r\n\r\nconst MovieCardDisplay = () => {\r\n    const [movie, setMovie] = useState<Movie | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const imageUrl = movie && generateImageUrl(movie.poster_path, 'w342');\r\n    const { setMoviePreview } = useMoviePreview();\r\n\r\n    useEffect(() => {\r\n        const fetchMovie = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const res = await axios.get('/movies/random');\r\n\r\n                if (res.status === 200) {\r\n                    setMovie(res.data);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n                setMovie(null);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchMovie();\r\n    }, []);\r\n\r\n    if (!movie || !imageUrl) return null;\r\n\r\n    return (\r\n        <S.Button onClick={() => setMoviePreview(movie)}>\r\n            <S.Image src={imageUrl} alt={`Movie poster for ${movie?.title}.`} />\r\n            <S.ButtonSection>\r\n                <S.InfoIcon />\r\n                See Details\r\n            </S.ButtonSection>\r\n        </S.Button>\r\n    );\r\n};\r\n\r\nexport default MovieCardDisplay;\r\n","import styled from 'styled-components';\r\nimport { MaxWidthContainer } from '../../../styles';\r\nimport { Button as MovieCardDisplayContainer } from '../MovieCardDisplay/style';\r\n\r\nexport const Container = styled(MaxWidthContainer)`\r\n    padding: 4rem 1.5rem 4rem;\r\n    max-width: 700px;\r\n\r\n    & ${MovieCardDisplayContainer} {\r\n        flex: 0 0 200px;\r\n    }\r\n\r\n    @media screen and (min-width: 600px) {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin: 0 auto;\r\n    }\r\n`;\r\n\r\nexport const Content = styled.div`\r\n    max-width: 350px;\r\n    h2 {\r\n        font-size: 1.5rem;\r\n        font-weight: 500;\r\n        margin-bottom: 1rem;\r\n        text-transform: uppercase;\r\n        letter-spacing: 1px;\r\n    }\r\n\r\n    p {\r\n        color: var(--white-muted);\r\n        line-height: 1.5;\r\n        margin-bottom: 0.5rem;\r\n\r\n        &:nth-last-of-type(2) {\r\n            margin-bottom: 1rem;\r\n        }\r\n\r\n        &:last-of-type {\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        @media screen and (min-width: 600px) {\r\n            &:last-of-type {\r\n                margin-bottom: 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    ul {\r\n        list-style-position: inside;\r\n        margin-bottom: 1rem;\r\n\r\n        & > li + li {\r\n            margin-top: 0.5rem;\r\n        }\r\n    }\r\n`;\r\n","import React from 'react';\r\nimport MovieCardDisplay from '../MovieCardDisplay';\r\nimport * as S from './style';\r\n\r\nconst Showcase = () => {\r\n    return (\r\n        <S.Container>\r\n            <S.Content>\r\n                <h2>See movie details</h2>\r\n                <p>Want to learn more about a movie before casting your vote? No problem.</p>\r\n                <p>Tap on a movie to see more details, including:</p>\r\n                <ul>\r\n                    <li>Description</li>\r\n                    <li>Runtime</li>\r\n                    <li>Rating</li>\r\n                    <li>Genres</li>\r\n                    <li>Trailer</li>\r\n                </ul>\r\n                <p>Try it out, tap on the movie card.</p>\r\n            </S.Content>\r\n            <MovieCardDisplay />\r\n        </S.Container>\r\n    );\r\n};\r\n\r\nexport default Showcase;\r\n","export default __webpack_public_path__ + \"static/media/movie-posters.0e940876.jpg\";","import styled from 'styled-components';\r\nimport Cinema from '../../../assets/movie-posters.jpg';\r\nimport { Button } from '../../../styles';\r\n\r\nexport const Container = styled.section`\r\n    position: relative;\r\n    z-index: 1;\r\n    overflow: hidden;\r\n\r\n    &:before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: -2;\r\n        background-image: url(${Cinema});\r\n        background-size: cover;\r\n        background-position: top;\r\n        background-repeat: no-repeat;\r\n    }\r\n\r\n    &:after {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: hsl(211deg 43% 13% / 90%);\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: -1;\r\n    }\r\n`;\r\n\r\nexport const CTA = styled.section`\r\n    position: relative;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 4rem 1.5rem;\r\n    min-height: 500px;\r\n\r\n    @media (min-width: 450px) {\r\n        margin: auto;\r\n    }\r\n\r\n    @media (min-width: 700px) {\r\n        align-items: flex-start;\r\n        min-height: 600px;\r\n    }\r\n\r\n    @media (min-width: 1500px) {\r\n        padding: 6rem 1rem;\r\n        min-height: 700px;\r\n    }\r\n`;\r\n\r\nexport const MainTitle = styled.h1`\r\n    display: flex;\r\n    flex-direction: column;\r\n    font-size: 2rem;\r\n    max-width: 650px;\r\n    letter-spacing: 1px;\r\n    line-height: 1.4;\r\n    color: #b3c4d8;\r\n    margin: 0 0 4rem;\r\n    font-weight: 400;\r\n    text-align: center;\r\n    text-transform: uppercase;\r\n    position: relative;\r\n\r\n    &::after {\r\n        /* content: ''; */\r\n        position: absolute;\r\n        height: 2px;\r\n        background: #cecece54;\r\n        background: #aaaaaa;\r\n        width: 100%;\r\n        bottom: -0.5rem;\r\n        left: 0;\r\n    }\r\n\r\n    @media (min-width: 700px) {\r\n        font-size: 2.25rem;\r\n    }\r\n`;\r\n\r\nexport const Bold = styled.span`\r\n    color: var(--white);\r\n    font-weight: 700;\r\n    font-size: 2.75rem;\r\n    text-transform: none;\r\n    line-height: 1.2;\r\n\r\n    @media (min-width: 700px) {\r\n        font-size: 3.5rem;\r\n    }\r\n`;\r\n\r\nexport const Subtitle = styled.h2`\r\n    text-transform: uppercase;\r\n    font-size: 1rem;\r\n    font-weight: 500;\r\n    color: #d8d8d8;\r\n    margin-bottom: 1rem;\r\n    letter-spacing: 2px;\r\n    margin-right: auto;\r\n    position: relative;\r\n    text-align: center;\r\n`;\r\n\r\nexport const BR = styled.br`\r\n    display: inline;\r\n    @media (min-width: 500px) {\r\n        display: none;\r\n    }\r\n`;\r\n\r\nexport const GetStartedButton = styled(Button)`\r\n    flex: 0;\r\n    background: var(--blue-action);\r\n    padding: 1rem 3rem;\r\n    font-weight: 500;\r\n    transition: background 100ms ease-in;\r\n    width: 100%;\r\n    margin: auto;\r\n\r\n    &:hover {\r\n        background: var(--blue-action-90);\r\n    }\r\n`;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Nav from '../../../components/Nav';\r\nimport Explainer from '../Explainer';\r\nimport Showcase from '../Showcase';\r\nimport { Bold, Container, CTA, GetStartedButton, MainTitle, Subtitle } from './style';\r\n\r\nconst Home = () => {\r\n    const history = useHistory();\r\n\r\n    const navigate = () => {\r\n        history.push('/create');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Movie Swiper</title>\r\n            </Helmet>\r\n            <Container>\r\n                <Nav forceShow />\r\n                <CTA>\r\n                    <div>\r\n                        <MainTitle>\r\n                            Movie night?\r\n                            <Bold>Put it to a vote</Bold>\r\n                        </MainTitle>\r\n                        <Subtitle>Find the right movie</Subtitle>\r\n                        <GetStartedButton onClick={navigate}>Get Started</GetStartedButton>\r\n                    </div>\r\n                </CTA>\r\n            </Container>\r\n            <Explainer />\r\n            <Showcase />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","import styled from 'styled-components';\r\n\r\nexport const InputGroup = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-bottom: 1rem;\r\n\r\n    &:last-of-type {\r\n        margin-bottom: 4rem;\r\n    }\r\n`;\r\n","import randomColor from 'randomcolor';\r\nimport React, { useState } from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport { ErrorMessage, FormButton, StyledForm } from '../../../styles';\r\nimport { InputGroup } from './style';\r\n\r\ninterface Errors {\r\n    name?: string;\r\n}\r\n\r\nconst initialInputs = {\r\n    name: '',\r\n};\r\n\r\nconst JoinForm = () => {\r\n    const history = useHistory();\r\n    const { id: roomId }: { [key: string]: string } = useParams();\r\n    const { user, setUser } = useUser();\r\n    const [inputs, setInputs] = useState(initialInputs);\r\n    const [touched, setTouched] = useState<Errors>({});\r\n    const [submitted, setSubmitted] = useState(false);\r\n\r\n    const errors = getErrors();\r\n    const isFormValid = !Object.keys(errors).length;\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setInputs((inputs) => ({ ...inputs, [name]: value }));\r\n    };\r\n\r\n    const onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\r\n        const { name } = e.target;\r\n        setTouched((touched) => ({ ...touched, [name]: true }));\r\n    };\r\n\r\n    function getErrors() {\r\n        const errors: Errors = {};\r\n        if (!inputs.name) errors.name = 'Name is required.';\r\n\r\n        return errors;\r\n    }\r\n\r\n    const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        setSubmitted(true);\r\n\r\n        if (!isFormValid) return;\r\n\r\n        const newUser = {\r\n            ...user,\r\n            name: inputs.name,\r\n            color: randomColor({\r\n                luminosity: 'light',\r\n                hue: 'blue',\r\n            }),\r\n        };\r\n        setUser(newUser);\r\n        history.push(`/selection/${roomId}`);\r\n    };\r\n\r\n    return (\r\n        <StyledForm onSubmit={onSubmit}>\r\n            <InputGroup>\r\n                <label>Your name</label>\r\n                <input type=\"text\" name=\"name\" onChange={onChange} onBlur={onBlur} />\r\n                {(touched.name || submitted) && errors.name && <ErrorMessage>{errors.name}</ErrorMessage>}\r\n            </InputGroup>\r\n            <FormButton>Get Started</FormButton>\r\n        </StyledForm>\r\n    );\r\n};\r\n\r\nexport default JoinForm;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport { FormPageContainer, Subtitle, Title } from '../../../styles';\r\nimport JoinForm from '../JoinForm';\r\n\r\nconst Join = () => {\r\n    return (\r\n        <FormPageContainer>\r\n            <Helmet>\r\n                <title>Join | Movie Swiper</title>\r\n            </Helmet>\r\n            <Title>Enter Your Name</Title>\r\n            <Subtitle>Enter your name before proceeding to movie selection.</Subtitle>\r\n            <JoinForm />\r\n        </FormPageContainer>\r\n    );\r\n};\r\n\r\nexport default Join;\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div<{ margin: string | undefined; backgroundColor: string | undefined }>`\r\n    padding: 0.75rem;\r\n    margin: ${(props) => props.margin || ''};\r\n    border-radius: 4px;\r\n    display: inline-block;\r\n    max-width: 500px;\r\n    background: ${(props) => props.backgroundColor || 'var(--accent-active)'};\r\n    color: hsl(340deg 38% 94%);\r\n`;\r\n\r\nexport const Text = styled.p`\r\n    line-height: 1.3;\r\n`;\r\n\r\nexport const TextContainer = styled.aside``;\r\n","import React from 'react';\r\nimport { Container, Text, TextContainer } from './style';\r\n\r\ninterface Props {\r\n    text: string;\r\n    margin?: string;\r\n    backgroundColor?: string;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst InfoBox = ({ text, margin, backgroundColor, children }: Props) => {\r\n    if (children) {\r\n        return (\r\n            <Container margin={margin} backgroundColor={backgroundColor}>\r\n                <TextContainer>{children}</TextContainer>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container margin={margin} backgroundColor={backgroundColor}>\r\n            <Text>{text}</Text>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default InfoBox;\r\n","import styled from 'styled-components';\r\n\r\nexport const List = styled.ul`\r\n    list-style: none;\r\n    margin-top: 0.5rem;\r\n    padding: 0.5rem 0;\r\n\r\n    & > * + * {\r\n        margin-top: 0.5rem;\r\n    }\r\n`;\r\n\r\nexport const Item = styled.li`\r\n    display: flex;\r\n    align-items: center;\r\n    color: var(--white-muted);\r\n`;\r\n\r\nexport const Color = styled.div<{ color: string }>`\r\n    background-color: ${(props) => props.color};\r\n    width: 12.5px;\r\n    height: 12.5px;\r\n    border-radius: 50%;\r\n    margin-right: 0.5rem;\r\n    flex-shrink: 0;\r\n`;\r\n\r\nexport const Name = styled.p<{ wrap: number }>`\r\n    white-space: ${(props) => props.wrap === 0 && 'nowrap'};\r\n    overflow: ${(props) => props.wrap === 0 && 'hidden'};\r\n    text-overflow: ${(props) => props.wrap === 0 && 'ellipsis'};\r\n    max-width: ${(props) => props.wrap === 0 && '110px'}; ;\r\n`;\r\n\r\nexport const MoreItems = styled.button`\r\n    margin-top: 0.5rem;\r\n    color: var(--white-muted);\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n\r\n    span {\r\n        margin-right: 0.25rem;\r\n    }\r\n`;\r\n\r\nexport const ModalContent = styled.section`\r\n    h2 {\r\n    }\r\n`;\r\n","import React, { useState } from 'react';\r\nimport Modal from '../../../components/Modal';\r\nimport { Participant } from '../../../types/room';\r\nimport { Color, Item, List, ModalContent, MoreItems, Name } from './styled';\r\n\r\ninterface Props {\r\n    users: Participant[];\r\n}\r\n\r\nconst LikeList = ({ users }: Props) => {\r\n    const [visible, setVisible] = useState(false);\r\n\r\n    const maxNumber = 3;\r\n    if (users.length > maxNumber) {\r\n        return (\r\n            <>\r\n                <List>\r\n                    {users.slice(0, maxNumber).map((user) => (\r\n                        <Item key={user.id}>\r\n                            <Color color={user.color} />\r\n                            <Name wrap={0}>{user.name}</Name>\r\n                        </Item>\r\n                    ))}\r\n                    <Item>\r\n                        <MoreItems onClick={() => setVisible(true)}>\r\n                            <span>+{users.length - maxNumber}</span> More\r\n                        </MoreItems>\r\n                    </Item>\r\n                </List>\r\n                <Modal visible={visible} onClose={() => setVisible(false)} height={300}>\r\n                    <ModalContent>\r\n                        <h2>Likes</h2>\r\n                        <List>\r\n                            {users.map((user) => (\r\n                                <Item key={user.id}>\r\n                                    <Color color={user.color} />\r\n                                    <Name wrap={1}>{user.name}</Name>\r\n                                </Item>\r\n                            ))}\r\n                        </List>\r\n                    </ModalContent>\r\n                </Modal>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <List>\r\n            {users.map((user) => (\r\n                <Item key={user.id}>\r\n                    <Color color={user.color} />\r\n                    <Name wrap={0}>{user.name}</Name>\r\n                </Item>\r\n            ))}\r\n        </List>\r\n    );\r\n};\r\n\r\nexport default LikeList;\r\n","import { motion } from 'framer-motion';\r\nimport { RiInformationLine } from 'react-icons/ri';\r\nimport styled from 'styled-components';\r\nimport { Button } from '../../../styles';\r\n\r\nexport const Card = styled.article`\r\n    border-right: 1px solid var(--blue-dark);\r\n    border-radius: 4px;\r\n    background: var(--blue-dark);\r\n`;\r\n\r\nexport const ResultsArea = styled.div`\r\n    display: flex;\r\n    position: relative;\r\n`;\r\n\r\nexport const ImageContainer = styled(motion.div)`\r\n    position: relative;\r\n`;\r\n\r\nexport const Image = styled(motion.img)`\r\n    height: 230px;\r\n    object-fit: cover;\r\n    display: block;\r\n    border-radius: 4px;\r\n`;\r\n\r\nexport const TotalLikes = styled.p`\r\n    font-weight: 600;\r\n    font-size: 1.25rem;\r\n    text-align: center;\r\n    padding: 0.5rem 1rem;\r\n    background: hsl(213deg 47% 48% / 90%);\r\n    position: absolute;\r\n    top: -1rem;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    display: flex;\r\n    align-items: baseline;\r\n    border-radius: 4px;\r\n\r\n    span {\r\n        font-size: 1rem;\r\n        font-weight: 500;\r\n        text-transform: uppercase;\r\n        letter-spacing: 1px;\r\n        margin-left: 0.5rem;\r\n    }\r\n`;\r\n\r\nexport const MovieTitle = styled.h3`\r\n    font-size: 1.125rem;\r\n    font-weight: 600;\r\n    line-height: 1.3;\r\n    border-top-left-radius: 4px;\r\n    border-top-right-radius: 4px;\r\n    border-bottom: 1px solid var(--blue-active);\r\n    padding-bottom: 0.75rem;\r\n`;\r\n\r\nexport const ResultsContainer = styled.div`\r\n    width: 100%;\r\n    background: var(--blue-dark);\r\n    padding: 1rem 1.5rem;\r\n`;\r\n\r\nexport const DetailButton = styled(Button)`\r\n    background: var(--blue-active);\r\n    width: 100%;\r\n    padding: 1rem;\r\n    border-top-left-radius: 0;\r\n    border-top-right-radius: 0;\r\n`;\r\n\r\nexport const ExpandIcon = styled(RiInformationLine)`\r\n    font-size: 1rem;\r\n    margin-right: 0.5rem;\r\n`;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useMoviePreview } from '../../../context/MoviePreviewContext';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport { generateImageUrl } from '../../../utils';\r\nimport LikeList from '../LikeList';\r\nimport {\r\n    Card,\r\n    DetailButton,\r\n    ExpandIcon,\r\n    Image,\r\n    ImageContainer,\r\n    MovieTitle,\r\n    ResultsArea,\r\n    ResultsContainer,\r\n    TotalLikes,\r\n} from './style';\r\n\r\ninterface Props {\r\n    movie: AddedMovie;\r\n}\r\n\r\nconst ResultCard = ({ movie }: Props) => {\r\n    const { setMoviePreview } = useMoviePreview();\r\n    const { pathname } = useLocation();\r\n    const usersWhoLiked = movie.swipes.filter((swipe) => swipe.liked).map((swipe) => swipe.user);\r\n\r\n    const onMovieClick = () => {\r\n        if (pathname.includes(movie.id.toString())) {\r\n            setMoviePreview(null);\r\n        } else {\r\n            setMoviePreview(movie);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card>\r\n            <ResultsArea>\r\n                <ImageContainer>\r\n                    <TotalLikes>\r\n                        {usersWhoLiked.length} <span>likes</span>\r\n                    </TotalLikes>\r\n                    <Image src={generateImageUrl(movie.poster_path, 'w500')} />\r\n                </ImageContainer>\r\n                <ResultsContainer>\r\n                    <MovieTitle>{movie.title}</MovieTitle>\r\n                    <LikeList users={usersWhoLiked} />\r\n                </ResultsContainer>\r\n            </ResultsArea>\r\n            <DetailButton onClick={onMovieClick}>\r\n                <ExpandIcon />\r\n                Movie Details\r\n            </DetailButton>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ResultCard;\r\n","import styled from 'styled-components';\r\n\r\nexport const List = styled.section`\r\n    display: grid;\r\n    gap: 4rem;\r\n    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\r\n`;\r\n\r\nexport const Empty = styled.p`\r\n    text-align: center;\r\n`;\r\n","import React from 'react';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport ResultCard from '../ResultCard';\r\nimport { List, Empty } from './style';\r\n\r\ninterface Props {\r\n    movies: AddedMovie[];\r\n}\r\n\r\nconst ResultList = ({ movies }: Props) => {\r\n    if (!movies.length) {\r\n        return <Empty>No matches yet.</Empty>;\r\n    }\r\n\r\n    return (\r\n        <List>\r\n            {movies.map((movie) => (\r\n                <ResultCard key={movie.id} movie={movie} />\r\n            ))}\r\n        </List>\r\n    );\r\n};\r\n\r\nexport default ResultList;\r\n","import styled from 'styled-components';\r\nimport { MaxWidthContainer } from '../../../styles';\r\n\r\nexport const Container = styled(MaxWidthContainer)``;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport InfoBox from '../../../components/InfoBox';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { Subtitle, Title } from '../../../styles';\r\nimport ResultList from '../ResultList';\r\nimport { Container } from './style';\r\n\r\nconst Results = () => {\r\n    const { room } = useRoom();\r\n    const sortedMovies = room.movies\r\n        .map((movie) => {\r\n            const likes = movie.swipes.reduce((acc, swipe) => (swipe.liked ? acc + 1 : acc), 0);\r\n            return { ...movie, likes };\r\n        })\r\n        .sort((a, b) => b.likes - a.likes);\r\n    const filteredMovies = sortedMovies.filter((movie) => movie.likes > 1);\r\n\r\n    const getInfoBoxProps = () => {\r\n        const participantIds = room.participants.map((p) => p.id);\r\n        const allSwiped = room.movies.reduce((allSwiped, movie) => {\r\n            const swipeIds = movie.swipes.map((swipe) => swipe.user.id);\r\n            allSwiped =\r\n                movie.swipes.length >= participantIds.length && participantIds.every((id) => swipeIds.includes(id));\r\n            return allSwiped;\r\n        }, true);\r\n\r\n        if (!allSwiped) {\r\n            return {\r\n                text: 'Others are still swiping. Results may change.',\r\n                backgroundColor: 'hsla(0, 0%, 49.4%, 0.5)',\r\n            };\r\n        }\r\n\r\n        return {\r\n            text: \"Everyone's done swiping. See the final results below.\",\r\n            backgroundColor: 'var(--accent-purple)',\r\n        };\r\n    };\r\n    const { text, backgroundColor } = getInfoBoxProps();\r\n\r\n    return (\r\n        <Container>\r\n            <Helmet>\r\n                <title>Results | Movie Swiper</title>\r\n            </Helmet>\r\n            <Title>Final Results</Title>\r\n            <Subtitle>Only movies that 2 or more participants liked will show up here.</Subtitle>\r\n            <InfoBox text={text} margin=\"0 0 4rem\" backgroundColor={backgroundColor} />\r\n            <ResultList movies={filteredMovies} />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Results;\r\n","/* eslint-disable react/display-name */\r\nimport React from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport { useRoom } from '../context/RoomContext';\r\nimport { useUser } from '../context/UserContext';\r\nimport { addMovie, removeMovie } from '../sockets/emitters';\r\nimport { FontWeight600 } from '../styles';\r\nimport { AddedMovie, Movie } from '../types/movies';\r\nimport { ToastType, useToast } from '../utils';\r\n\r\nconst useMovieManager = (movie: Movie) => {\r\n    const { room } = useRoom();\r\n    const { user } = useUser();\r\n    const movieInList = room.movies.find((m) => m.id === movie.id);\r\n    const addedByMe = movieInList?.addedByUserId === user.id;\r\n\r\n    const movieActionHandler = () => {\r\n        if (!movieInList) {\r\n            const addedMovie: AddedMovie = { ...movie, addedByUserId: user.id, swipes: [] };\r\n            addMovie({ roomId: room.roomId as string, movie: addedMovie }, (res) => {\r\n                if (res.success) {\r\n                    useToast({\r\n                        type: ToastType.Success,\r\n                        message: () => (\r\n                            <>\r\n                                <span>\r\n                                    You added <FontWeight600>{movie.title}</FontWeight600>.\r\n                                </span>\r\n                            </>\r\n                        ),\r\n                    });\r\n                } else {\r\n                    useToast({\r\n                        type: ToastType.Error,\r\n                        message: () => (\r\n                            <>\r\n                                <span>\r\n                                    There was a problem adding <FontWeight600>{movie.title}</FontWeight600>.\r\n                                </span>\r\n                            </>\r\n                        ),\r\n                    });\r\n                    toast.error(`There was a problem adding ${movie.title}.`);\r\n                }\r\n            });\r\n        } else if (movieInList && !addedByMe) {\r\n            useToast({\r\n                type: ToastType.Custom,\r\n                message: () => (\r\n                    <span>\r\n                        <FontWeight600>{movie.title}</FontWeight600> can only be removed by the person who added it.\r\n                    </span>\r\n                ),\r\n                duration: 4000,\r\n            });\r\n            return;\r\n        } else {\r\n            removeMovie({ roomId: room.roomId as string, movieId: movie.id }, (res) => {\r\n                if (!res.success) {\r\n                    toast.error(`There was a problem removing ${movie.title}.`);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const getButtonBackgroundColor = (): string => {\r\n        if (!movieInList) {\r\n            return 'hsl(213deg 40% 49%)';\r\n        } else if (movieInList && !addedByMe) {\r\n            return 'hsl(213deg 6% 37% / 90%)';\r\n        } else {\r\n            return 'var(--accent-dark-90)';\r\n        }\r\n    };\r\n\r\n    return { movieActionHandler, buttonBackgroundColor: getButtonBackgroundColor(), movieInList };\r\n};\r\n\r\nexport default useMovieManager;\r\n","import { motion } from 'framer-motion';\r\nimport { AiFillStar } from 'react-icons/ai';\r\nimport { HiMinus, HiOutlinePlus } from 'react-icons/hi';\r\nimport { IoIosArrowBack, IoMdClose } from 'react-icons/io';\r\nimport styled, { css } from 'styled-components';\r\nimport { Button } from '../../../styles';\r\n\r\nexport const Overlay = styled(motion.div)`\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0);\r\n    will-change: opacity;\r\n    z-index: 6;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        background: rgba(0, 0, 0, 0.5);\r\n    }\r\n`;\r\n\r\nexport const Container = styled(motion.section)<{ imageUrl?: string | null }>`\r\n    height: 100%;\r\n    width: 100%;\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    will-change: opacity;\r\n    z-index: 7;\r\n    overflow-y: scroll;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        max-width: 800px;\r\n        max-height: 500px;\r\n        left: 0;\r\n        right: 0;\r\n        margin: auto;\r\n        background: rgba(0, 0, 0, 0.5);\r\n        border-radius: 4px;\r\n    }\r\n`;\r\n\r\nexport const Image = styled(motion.img)`\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    display: block;\r\n    object-fit: cover;\r\n    filter: brightness(0.25);\r\n    z-index: -1;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        height: auto;\r\n    }\r\n`;\r\n\r\nexport const ContentContainer = styled(motion.article)`\r\n    height: auto;\r\n    min-height: 100%;\r\n    width: 100%;\r\n    position: relative;\r\n    padding: 2rem 2rem 6rem;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        max-width: 800px;\r\n        max-height: 500px;\r\n        left: 0;\r\n        right: 0;\r\n        margin: auto;\r\n        border-radius: 4px;\r\n        padding: 3rem;\r\n    }\r\n`;\r\n\r\nexport const Title = styled(motion.h3)`\r\n    font-size: 3rem;\r\n    margin-bottom: 0.5rem;\r\n`;\r\n\r\nexport const Tag = styled.p`\r\n    margin-bottom: 1rem;\r\n    color: var(--white-muted);\r\n`;\r\n\r\nexport const WrapContainer = styled.div`\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 2rem;\r\n\r\n    & > * {\r\n        margin-top: 0.5rem;\r\n        margin-right: 0.5rem;\r\n    }\r\n`;\r\n\r\nexport const Genre = styled.p`\r\n    background: #495768;\r\n    color: var(--white);\r\n    padding: 0.125rem 0.75rem;\r\n    border-radius: 99px;\r\n`;\r\n\r\nexport const Overview = styled.p`\r\n    line-height: 1.7;\r\n    margin-bottom: 2rem;\r\n`;\r\n\r\nexport const Label = styled.p`\r\n    font-size: 1.25rem;\r\n    font-weight: 600;\r\n    margin-bottom: 0.5rem;\r\n`;\r\n\r\nexport const Divider = styled.p`\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    padding-bottom: 0.5rem;\r\n    margin-bottom: 1rem;\r\n    color: var(--gray);\r\n    border-bottom: 1px solid;\r\n    font-size: 0.875rem;\r\n`;\r\n\r\nexport const RatingText = styled.p`\r\n    display: flex;\r\n    align-items: center;\r\n`;\r\n\r\nexport const Grid = styled.div`\r\n    display: grid;\r\n    grid-gap: 1rem;\r\n    margin-bottom: 2rem;\r\n\r\n    @media screen and (min-width: 350px) {\r\n        grid-template-columns: repeat(2, minmax(130px, 200px));\r\n    }\r\n`;\r\n\r\nexport const GridCell = styled.div`\r\n    p {\r\n        display: flex;\r\n    }\r\n`;\r\n\r\nexport const Star = styled(AiFillStar)`\r\n    margin-left: 0.5rem;\r\n    color: #dada1b;\r\n`;\r\n\r\nexport const Video = styled.iframe`\r\n    width: 100%;\r\n\r\n    @media screen and (min-width: 450px) {\r\n        height: 275px;\r\n    }\r\n\r\n    @media screen and (min-width: 600px) {\r\n        height: 500px;\r\n        margin-bottom: 3rem;\r\n    }\r\n`;\r\n\r\nexport const ButtonContainer = styled(motion.div)`\r\n    display: flex;\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: hsl(213deg 23% 25%);\r\n    box-shadow: 0 -2px 10px -1px rgb(0 0 0 / 30%);\r\n    margin-top: auto;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        display: none;\r\n    }\r\n`;\r\n\r\nexport const BackButton = styled(Button)``;\r\n\r\nexport const AddButton = styled(Button)<{ backgroundColor: string }>`\r\n    background: ${(props) => props.backgroundColor || 'var(--blue-action)'};\r\n    border-top-left-radius: 0;\r\n`;\r\n\r\nconst iconStyles = css`\r\n    margin-right: 1rem;\r\n    font-size: 1.125rem;\r\n`;\r\n\r\nexport const BackIcon = styled(IoIosArrowBack)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const PlusIcon = styled(HiOutlinePlus)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const MinusIcon = styled(HiMinus)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const CloseIcon = styled(IoMdClose)`\r\n    font-size: 2rem;\r\n    color: var(--white-muted);\r\n`;\r\n\r\nexport const CloseButton = styled.button`\r\n    display: none;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: 1rem;\r\n    top: 1rem;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        display: block;\r\n    }\r\n`;\r\n\r\nexport const DesktopAddButton = styled(Button)<{ backgroundColor: string }>`\r\n    display: none;\r\n    max-width: 300px;\r\n    background: ${(props) => props.backgroundColor || 'var(--blue-action)'};\r\n    padding: 0.5rem 1rem;\r\n    border-radius: 4px;\r\n    margin-bottom: 2rem;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        display: flex;\r\n    }\r\n`;\r\n","import axios from 'axios';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useMoviePreview } from '../../../context/MoviePreviewContext';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport useMovieManager from '../../../hooks/useMovieManager';\r\nimport { Movie, MovieDetails } from '../../../types/movies';\r\nimport { Stage } from '../../../types/room';\r\nimport { generateImageUrl } from '../../../utils';\r\nimport {\r\n    AddButton,\r\n    BackButton,\r\n    BackIcon,\r\n    ButtonContainer,\r\n    CloseButton,\r\n    CloseIcon,\r\n    Container,\r\n    ContentContainer,\r\n    DesktopAddButton,\r\n    Divider,\r\n    Genre,\r\n    Grid,\r\n    GridCell,\r\n    Image,\r\n    Label,\r\n    MinusIcon,\r\n    Overlay,\r\n    Overview,\r\n    PlusIcon,\r\n    RatingText,\r\n    Star,\r\n    Tag,\r\n    Title,\r\n    Video,\r\n    WrapContainer,\r\n} from './style';\r\n\r\ninterface Props {\r\n    movie: Movie;\r\n}\r\n\r\nconst MovieDetail = ({ movie }: Props) => {\r\n    const history = useHistory();\r\n    const { room } = useRoom();\r\n    const { movieActionHandler, buttonBackgroundColor, movieInList } = useMovieManager(movie);\r\n    const { setMoviePreview: setMovieDetail } = useMoviePreview();\r\n\r\n    const [details, setDetails] = useState<MovieDetails | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const imageUrl = generateImageUrl(movie.poster_path, 'w500');\r\n    const trailerData =\r\n        details && details?.videos?.results?.find((video) => video.type === 'Trailer' && video.site === 'YouTube');\r\n    const trailerUrl = `https://www.youtube.com/embed/${trailerData?.key}`;\r\n    const inSelection = history.location.pathname.includes(Stage.SELECTION);\r\n\r\n    const onOverlayClick = (e: any) => {\r\n        if (e.target.attributes['data-overlay']) {\r\n            setMovieDetail(null);\r\n        }\r\n    };\r\n\r\n    const backToSelection = () => {\r\n        setMovieDetail(null);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const onEscPress = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') {\r\n                history.push(`/selection/${room.roomId}`);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', onEscPress);\r\n\r\n        return window.removeEventListener('keydown', onEscPress);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchMovieDetails();\r\n        document.body.style.overflow = 'hidden';\r\n        return () => {\r\n            cancelToken.cancel('Component got unmounted');\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [movie]);\r\n\r\n    const cancelToken = axios.CancelToken.source();\r\n\r\n    const fetchMovieDetails = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const res = await axios.get(`/movies/${movie.id}`, {\r\n                cancelToken: cancelToken.token,\r\n            });\r\n            if (res.status === 200) {\r\n                setDetails(res.data);\r\n            }\r\n            setLoading(false);\r\n        } catch (error) {\r\n            cancelToken.cancel('Error in try catch block.');\r\n            console.log(error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Overlay\r\n            data-overlay={true}\r\n            onClick={onOverlayClick}\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0, transition: { duration: 0 } }}\r\n        >\r\n            <Container>\r\n                <ContentContainer initial={{ opacity: 0 }} animate={{ opacity: 1 }} layoutId={`image-${movie.id}`}>\r\n                    <CloseButton onClick={backToSelection}>\r\n                        <CloseIcon />\r\n                    </CloseButton>\r\n                    <Image src={imageUrl} alt={`Movie poster for ${movie.title}.`} />\r\n                    <AnimatePresence>\r\n                        {details && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                transition={{ duration: 0.2, delay: 0.25 }}\r\n                            >\r\n                                {inSelection && (\r\n                                    <DesktopAddButton\r\n                                        onClick={movieActionHandler}\r\n                                        backgroundColor={buttonBackgroundColor}\r\n                                    >\r\n                                        {' '}\r\n                                        {!movieInList && (\r\n                                            <>\r\n                                                <PlusIcon /> Add Movie\r\n                                            </>\r\n                                        )}\r\n                                        {movieInList && (\r\n                                            <>\r\n                                                <MinusIcon /> Remove Movie\r\n                                            </>\r\n                                        )}\r\n                                    </DesktopAddButton>\r\n                                )}\r\n                                <Title>{details.title}</Title>\r\n                                <Tag>{details.tagline}</Tag>\r\n\r\n                                <WrapContainer>\r\n                                    {details.genres?.map((genre) => (\r\n                                        <Genre key={genre.id}>{genre.name}</Genre>\r\n                                    ))}\r\n                                </WrapContainer>\r\n                                <Label>Overview</Label>\r\n                                <Overview>{details.overview}</Overview>\r\n                                <Divider>Details</Divider>\r\n                                <Grid>\r\n                                    <GridCell>\r\n                                        <Label>Rating</Label>\r\n                                        <RatingText>\r\n                                            {details.vote_average} <Star />\r\n                                        </RatingText>\r\n                                    </GridCell>\r\n                                    <GridCell>\r\n                                        <Label>Runtime</Label>\r\n                                        <p>{details.runtime} min</p>\r\n                                    </GridCell>\r\n                                    <GridCell>\r\n                                        <Label>Released</Label>\r\n                                        <p>{details.release_date}</p>\r\n                                    </GridCell>\r\n                                    <GridCell>\r\n                                        <Label>Language</Label>\r\n                                        <p>{details.original_language.toUpperCase()}</p>\r\n                                    </GridCell>\r\n                                </Grid>\r\n                                {trailerData && (\r\n                                    <>\r\n                                        <Divider>Trailer</Divider>\r\n                                        <Video src={trailerUrl} frameBorder=\"0\" allowFullScreen></Video>\r\n                                    </>\r\n                                )}\r\n                                <ButtonContainer\r\n                                    initial={{ opacity: 0, y: 50 }}\r\n                                    animate={{\r\n                                        opacity: 1,\r\n                                        y: 0,\r\n                                        transition: {\r\n                                            duration: 0.75,\r\n                                        },\r\n                                    }}\r\n                                >\r\n                                    <BackButton onClick={backToSelection}>\r\n                                        <BackIcon />\r\n                                        Go Back\r\n                                    </BackButton>\r\n                                    {inSelection && (\r\n                                        <AddButton onClick={movieActionHandler} backgroundColor={buttonBackgroundColor}>\r\n                                            {!movieInList && (\r\n                                                <>\r\n                                                    <PlusIcon /> Add Movie\r\n                                                </>\r\n                                            )}\r\n                                            {movieInList && (\r\n                                                <>\r\n                                                    <MinusIcon /> Remove\r\n                                                </>\r\n                                            )}\r\n                                        </AddButton>\r\n                                    )}\r\n                                </ButtonContainer>\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </ContentContainer>\r\n            </Container>\r\n        </Overlay>\r\n    );\r\n};\r\n\r\nexport default MovieDetail;\r\n","import styled from 'styled-components';\r\nimport { Button } from '../../styles';\r\n\r\nexport const Container = styled.aside`\r\n    margin-bottom: 2rem;\r\n\r\n    @media (min-width: 800px) {\r\n        max-width: 400px;\r\n    }\r\n`;\r\n\r\nexport const Label = styled.label`\r\n    color: var(--white-muted);\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    font-size: 0.875rem;\r\n    margin-bottom: 0.5rem;\r\n    display: inline-block;\r\n`;\r\n\r\nexport const InputContainer = styled.div`\r\n    display: flex;\r\n\r\n    input {\r\n        padding: 0.5rem;\r\n        border-radius: 4px;\r\n        flex-basis: 65%;\r\n        text-overflow: ellipsis;\r\n        border-top-right-radius: 0;\r\n        border-bottom-right-radius: 0;\r\n    }\r\n`;\r\n\r\nexport const CopyButton = styled(Button)`\r\n    background: var(--blue-action);\r\n    padding: 0.5rem 1.25rem;\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0;\r\n`;\r\n","import React, { useRef } from 'react';\r\nimport { ToastType, useToast } from '../../utils';\r\nimport { Container, CopyButton, InputContainer, Label } from './style';\r\n\r\nconst InviteLink = () => {\r\n    const inputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n    const onClick = () => {\r\n        inputRef.current?.select();\r\n    };\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(window.location.href);\r\n        useToast({ type: ToastType.Custom, message: 'Copied to clipboard.' });\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Label>Invite Link</Label>\r\n            <InputContainer>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"link\"\r\n                    defaultValue={window.location.href}\r\n                    ref={inputRef}\r\n                    onClick={onClick}\r\n                    readOnly\r\n                />\r\n                <CopyButton onClick={copyToClipboard}>Copy</CopyButton>\r\n            </InputContainer>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default InviteLink;\r\n","import styled from 'styled-components';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const Container = styled(motion.div)<{ position?: string }>`\r\n    position: ${(props) => props.position || 'fixed'};\r\n    left: 0;\r\n    right: 0;\r\n    bottom: -3px;\r\n    display: flex;\r\n    box-shadow: 0 -2px 10px -1px rgb(0 0 0 / 30%);\r\n    width: 100%;\r\n    z-index: 4;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        margin: auto;\r\n        width: fit-content;\r\n        bottom: 1rem;\r\n    }\r\n`;\r\n","import React, { ReactNode } from 'react';\r\nimport { Container } from './style';\r\n\r\ninterface Props {\r\n    position: string;\r\n    children: ReactNode | ReactNode[];\r\n}\r\n\r\nconst animation = {\r\n    initial: {\r\n        y: 75,\r\n        opacity: 0,\r\n    },\r\n    animate: {\r\n        y: 0,\r\n        opacity: 1,\r\n        transition: {\r\n            duration: 0.5,\r\n            delay: 1,\r\n        },\r\n    },\r\n};\r\n\r\nconst FixedContainer = ({ position, children }: Props) => {\r\n    return (\r\n        <Container variants={animation} initial=\"initial\" animate=\"animate\" position={position}>\r\n            {children}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default FixedContainer;\r\n","import { FaCrown, FaUserAlt, FaUserCheck } from 'react-icons/fa';\r\nimport { RiCheckboxCircleFill, RiCheckboxCircleLine, RiMovieFill } from 'react-icons/ri';\r\nimport { SiTinder } from 'react-icons/si';\r\nimport styled, { css } from 'styled-components';\r\nimport { Button } from '../../../styles/index';\r\n\r\nexport const FixedContainer = styled.div`\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: -3px;\r\n    display: flex;\r\n    box-shadow: 0 -2px 10px -1px rgb(0 0 0 / 30%);\r\n    width: 100%;\r\n    z-index: 4;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        margin: auto;\r\n        width: fit-content;\r\n        bottom: 1rem;\r\n    }\r\n`;\r\n\r\nconst iconStyles = css`\r\n    font-size: 1.25rem;\r\n    margin-right: 1rem;\r\n    width: 20px;\r\n`;\r\n\r\nexport const UserCheck = styled(FaUserCheck)`\r\n    ${iconStyles}\r\n    margin-right: 0.5rem;\r\n`;\r\n\r\nexport const FillCheckbox = styled(RiCheckboxCircleFill)`\r\n    ${iconStyles}\r\n`;\r\nexport const EmptyCheckbox = styled(RiCheckboxCircleLine)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const TinderIcon = styled(SiTinder)`\r\n    ${iconStyles}\r\n`;\r\nexport const PlayIcon = styled(RiMovieFill)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const CrownIcon = styled(FaCrown)`\r\n    ${iconStyles}\r\n`;\r\n\r\nexport const UserIcon = styled(FaUserAlt)`\r\n    ${iconStyles}\r\n    font-size: 1rem;\r\n`;\r\n\r\nexport const MainButton = styled(Button)<{ disable?: boolean }>`\r\n    background: ${(props) => (props.disable ? '#808080' : 'var(--accent-purple)')};\r\n    color: ${(props) => (props.disable ? '#cbc8c8' : 'var(--white)')};\r\n    transition: all ease-in 250ms;\r\n    flex: 70%;\r\n    outline: none;\r\n    border-radius: 0;\r\n    border-top-right-radius: 4px;\r\n    border-bottom-right-radius: 4px;\r\n\r\n    & ${PlayIcon} {\r\n        transition: all ease-in 250ms;\r\n        color: ${(props) => props.disable && '#a9a9a9'};\r\n    }\r\n\r\n    @media screen and (min-width: 600px) {\r\n        padding: 1rem 2rem;\r\n        white-space: nowrap;\r\n    }\r\n`;\r\n\r\nexport const ToggleReadyButton = styled(MainButton)<{ $ready: boolean }>`\r\n    background: ${(props) => (props.$ready ? 'var(--accent-purple)' : 'var(--blue-active)')};\r\n`;\r\n\r\nexport const ReadyButton = styled(Button)`\r\n    flex: 30%;\r\n    background: var(--blue-dark-bg);\r\n    outline: none;\r\n    border-radius: 0;\r\n    border-top-left-radius: 4px;\r\n    border-bottom-left-radius: 4px;\r\n\r\n    span {\r\n        width: 20px;\r\n    }\r\n`;\r\n\r\nexport const NoParticipants = styled.p`\r\n    margin-bottom: 1rem;\r\n    color: var(--white-muted);\r\n`;\r\n\r\nexport const ModalContent = styled.div`\r\n    padding: 0 1rem;\r\n    h2 {\r\n        font-size: 1.5rem;\r\n        font-weight: 600;\r\n        margin-bottom: 1rem;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    ul {\r\n        margin-bottom: 2rem;\r\n        & > * + * {\r\n            margin-top: 1rem;\r\n        }\r\n    }\r\n\r\n    li {\r\n        list-style: none;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        font-size: 1.125rem;\r\n\r\n        div {\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n\r\n        p {\r\n            text-transform: uppercase;\r\n            letter-spacing: 1px;\r\n            font-size: 0.875rem;\r\n            color: var(--white-muted);\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ReadyText = styled.p`\r\n    line-height: 1.3;\r\n    margin-bottom: 2rem;\r\n`;\r\n\r\nexport const StartButton = styled(Button)`\r\n    background: var(--accent-purple);\r\n    padding: 0.75rem 1rem;\r\n    width: 100%;\r\n    margin-top: 2rem;\r\n`;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport { useHistory } from 'react-router-dom';\r\nimport FixedContainer from '../../../components/FixedContainer';\r\nimport Modal from '../../../components/Modal';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport { startSwiper, toggleReady } from '../../../sockets/emitters';\r\nimport { ToastType, useToast } from '../../../utils';\r\nimport {\r\n    CrownIcon,\r\n    EmptyCheckbox,\r\n    FillCheckbox,\r\n    MainButton,\r\n    ModalContent,\r\n    PlayIcon,\r\n    ReadyButton,\r\n    StartButton,\r\n    ToggleReadyButton,\r\n    UserCheck,\r\n    UserIcon,\r\n} from './style';\r\n\r\nconst ActionButton = () => {\r\n    const { room } = useRoom();\r\n    const { user } = useUser();\r\n    const history = useHistory();\r\n    const [groupModalVisible, setGroupModalVisible] = useState(false);\r\n    const [swipeModalVisible, setSwipeModalVisible] = useState(false);\r\n    const owner = room.participants.find((p) => p.id === room.ownerId);\r\n    const isUserReady = room.participants.find((p) => p.id === user.id)?.ready;\r\n    const participantsReady = room.participants.filter((p) => p.ready && p.id !== room.ownerId);\r\n    const disableSwiping = !room.movies.length || !participantsReady.length;\r\n    const toastId = useRef<string>();\r\n    const timeoutId = useRef<number>();\r\n\r\n    const toggleReadyHandler = () => {\r\n        if (toastId.current) {\r\n            toast.dismiss(toastId.current);\r\n        }\r\n        clearTimeout(timeoutId.current);\r\n        toggleReady({ roomId: room.roomId as string, userId: user.id }, (res) => {\r\n            if (res.success && !isUserReady) {\r\n                useToast({ type: ToastType.Success, message: 'The room owner has been notified.', duration: 2500 });\r\n                timeoutId.current = window.setTimeout(\r\n                    () =>\r\n                        (toastId.current = useToast({\r\n                            type: ToastType.Loading,\r\n                            message: 'Waiting for room owner to start.',\r\n                            duration: 99999,\r\n                        })),\r\n                    2500,\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n    const confirmSwipeAction = () => {\r\n        startSwiper({ roomId: room.roomId as string });\r\n        history.replace(`/swiper/${room.roomId}`);\r\n    };\r\n\r\n    const startSwiping = () => {\r\n        if (!disableSwiping) {\r\n            setSwipeModalVisible(true);\r\n            return;\r\n        }\r\n\r\n        if (room.participants.length <= 1) {\r\n            useToast({ type: ToastType.Custom, message: 'Invite participants to start.' });\r\n            return;\r\n        }\r\n\r\n        if (!room.movies.length) {\r\n            useToast({ type: ToastType.Custom, message: 'Add movies to the list to start.', duration: 3000 });\r\n            return;\r\n        }\r\n\r\n        if (!participantsReady.length) {\r\n            useToast({ type: ToastType.Custom, message: 'Wait for participants to be ready.', duration: 3000 });\r\n        }\r\n    };\r\n\r\n    const checkReady = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n        e.stopPropagation();\r\n        setGroupModalVisible(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (toastId.current) {\r\n                toast.dismiss(toastId.current);\r\n                toastId.current = undefined;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <FixedContainer position=\"fixed\">\r\n                <ReadyButton onClick={checkReady}>\r\n                    <UserCheck /> <span>{participantsReady.length}</span>\r\n                </ReadyButton>\r\n                {owner && owner.id === user.id ? (\r\n                    <MainButton onClick={startSwiping} disable={disableSwiping}>\r\n                        <PlayIcon />\r\n                        Start Swiping\r\n                    </MainButton>\r\n                ) : (\r\n                    <ToggleReadyButton onClick={toggleReadyHandler} $ready={Boolean(isUserReady)}>\r\n                        {isUserReady ? <FillCheckbox /> : <EmptyCheckbox />}\r\n                        Ready To Swipe\r\n                    </ToggleReadyButton>\r\n                )}\r\n            </FixedContainer>\r\n            <Modal visible={groupModalVisible} onClose={() => setGroupModalVisible(false)} height={300} maxWidth={400}>\r\n                <ModalContent>\r\n                    <h2>Participants</h2>\r\n                    <ul>\r\n                        {room.participants.map((p) => {\r\n                            if (p.id === room.ownerId) {\r\n                                return (\r\n                                    <li key={p.id}>\r\n                                        <div>\r\n                                            <CrownIcon />\r\n                                            {p.name}\r\n                                        </div>\r\n                                        <p>Owner</p>\r\n                                    </li>\r\n                                );\r\n                            }\r\n\r\n                            return (\r\n                                <li key={p.id}>\r\n                                    <div>\r\n                                        {p.ready ? <UserCheck style={{ marginRight: '1rem' }} /> : <UserIcon />}{' '}\r\n                                        {p.name}\r\n                                    </div>\r\n                                    {p.ready && <p>Ready</p>}\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                </ModalContent>\r\n            </Modal>\r\n            <Modal visible={swipeModalVisible} onClose={() => setSwipeModalVisible(false)} height={280} maxWidth={400}>\r\n                <ModalContent>\r\n                    <h2>Start Swiping</h2>\r\n                    <ol>\r\n                        <li>This action will move everyone in the group to the swiping stage.</li>\r\n                        <br />\r\n                        <li>Once in this stage, group members won&apos;t be allowed to go back and add more movies.</li>\r\n                    </ol>\r\n                    <StartButton onClick={confirmSwipeAction}>Start</StartButton>\r\n                </ModalContent>\r\n            </Modal>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ActionButton;\r\n","import styled from 'styled-components';\r\n\r\nexport const TabBar = styled.nav`\r\n    display: flex;\r\n    margin-bottom: 2rem;\r\n\r\n    & > * {\r\n        flex: 1;\r\n    }\r\n`;\r\n\r\nexport const Tab = styled.button<{ selected: boolean }>`\r\n    background: none;\r\n    border: none;\r\n    cursor: pointer;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    font-size: 0.875rem;\r\n    font-weight: ${(props) => (props.selected ? 500 : 400)};\r\n    border-bottom: ${(props) => !props.selected && '2px solid var(--blue-active)'};\r\n    background: ${(props) => props.selected && 'var(--blue-active)'};\r\n    color: var(--white);\r\n    padding: 1rem;\r\n    border-top-left-radius: 4px;\r\n    border-top-right-radius: 4px;\r\n`;\r\n\r\nexport const TabContent = styled.section<{ show: boolean }>`\r\n    display: ${(props) => (props.show ? 'block' : 'none')};\r\n`;\r\n","import React, { ReactNode, useState } from 'react';\r\nimport { Tab, TabBar, TabContent } from './style';\r\n\r\ninterface Props {\r\n    tabs: string[];\r\n    children: ReactNode[];\r\n}\r\n\r\nconst Tabs = ({ tabs, children }: Props) => {\r\n    const [currentTab, setCurrentTab] = useState(0);\r\n\r\n    const changeTab = (index: number) => {\r\n        setCurrentTab(index);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <TabBar>\r\n                {tabs.map((tabName, index) => (\r\n                    <Tab key={index} selected={currentTab === index} onClick={(e) => changeTab(index)}>\r\n                        {tabName}\r\n                    </Tab>\r\n                ))}\r\n            </TabBar>\r\n\r\n            {children.map((component, index) => (\r\n                <TabContent key={index} show={currentTab === index}>\r\n                    {component}\r\n                </TabContent>\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Tabs;\r\n","export const genres = [\r\n    {\r\n        id: 28,\r\n        name: 'Action',\r\n    },\r\n    {\r\n        id: 12,\r\n        name: 'Adventure',\r\n    },\r\n    {\r\n        id: 16,\r\n        name: 'Animation',\r\n    },\r\n    {\r\n        id: 35,\r\n        name: 'Comedy',\r\n    },\r\n    {\r\n        id: 80,\r\n        name: 'Crime',\r\n    },\r\n    {\r\n        id: 99,\r\n        name: 'Documentary',\r\n    },\r\n    {\r\n        id: 18,\r\n        name: 'Drama',\r\n    },\r\n    {\r\n        id: 10751,\r\n        name: 'Family',\r\n    },\r\n    {\r\n        id: 14,\r\n        name: 'Fantasy',\r\n    },\r\n    {\r\n        id: 36,\r\n        name: 'History',\r\n    },\r\n    {\r\n        id: 27,\r\n        name: 'Horror',\r\n    },\r\n    {\r\n        id: 10402,\r\n        name: 'Music',\r\n    },\r\n    {\r\n        id: 9648,\r\n        name: 'Mystery',\r\n    },\r\n    {\r\n        id: 10749,\r\n        name: 'Romance',\r\n    },\r\n    {\r\n        id: 878,\r\n        name: 'Science Fiction',\r\n    },\r\n    {\r\n        id: 10770,\r\n        name: 'TV Movie',\r\n    },\r\n    {\r\n        id: 53,\r\n        name: 'Thriller',\r\n    },\r\n    {\r\n        id: 10752,\r\n        name: 'War',\r\n    },\r\n    {\r\n        id: 37,\r\n        name: 'Western',\r\n    },\r\n];\r\n","import { motion } from 'framer-motion';\r\nimport { HiMinus, HiOutlinePlus } from 'react-icons/hi';\r\nimport { RiInformationLine } from 'react-icons/ri';\r\nimport styled from 'styled-components';\r\nimport { Button } from './../../../styles/index';\r\nimport { Genre } from './../MovieDetail/style';\r\n\r\nexport const Item = styled.article`\r\n    display: flex;\r\n    position: relative;\r\n    height: 250px;\r\n    cursor: pointer;\r\n\r\n    @media screen and (min-width: 800px) {\r\n        height: 300px;\r\n    }\r\n`;\r\n\r\nexport const Image = styled(motion.img)`\r\n    max-width: 30%;\r\n    object-fit: cover;\r\n    display: block;\r\n    border-radius: 4px;\r\n    margin-right: 1rem;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        margin-right: 2rem;\r\n    }\r\n`;\r\n\r\nexport const InfoContainer = styled.article`\r\n    overflow: hidden;\r\n    position: relative;\r\n\r\n    &:after {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: linear-gradient(\r\n            to top,\r\n            hsl(210, 38%, 15%) 0%,\r\n            hsla(210, 38%, 15%, 0.941) 25%,\r\n            hsla(210, 38%, 15%, 0.881) 28%,\r\n            hsla(210, 38%, 15%, 0.819) 32%,\r\n            hsla(210, 38%, 15%, 0.756) 36%,\r\n            hsla(210, 38%, 15%, 0.692) 41.3%,\r\n            hsla(210, 38%, 15%, 0.626) 45.7%,\r\n            hsla(210, 38%, 15%, 0.56) 49.6%,\r\n            hsla(210, 38%, 15%, 0.492) 53.3%,\r\n            hsla(210, 38%, 15%, 0.424) 57.2%,\r\n            hsla(210, 38%, 15%, 0.355) 61.4%,\r\n            hsla(210, 38%, 15%, 0.285) 66.4%,\r\n            hsla(210, 38%, 15%, 0.214) 72.4%,\r\n            hsla(210, 38%, 15%, 0.143) 79.8%,\r\n            hsla(210, 38%, 15%, 0.072) 88.9%,\r\n            hsla(210, 38%, 15%, 0) 100%\r\n        );\r\n    }\r\n`;\r\n\r\nexport const Title = styled.h3`\r\n    font-size: 1.25rem;\r\n    margin-bottom: 0.5rem;\r\n\r\n    @media screen and (min-width: 800px) {\r\n        font-size: 2rem;\r\n    }\r\n`;\r\nexport const GenreContainer = styled.div`\r\n    display: flex;\r\n    margin-bottom: 0.5rem;\r\n\r\n    @media screen and (min-width: 800px) {\r\n        margin-bottom: 1rem;\r\n    }\r\n`;\r\n\r\nexport const SmallGenre = styled(Genre)`\r\n    font-size: 0.875rem;\r\n    margin-right: 0.5rem;\r\n\r\n    @media screen and (min-width: 800px) {\r\n        font-size: 1rem;\r\n        margin-right: 1rem;\r\n    }\r\n`;\r\n\r\nexport const Overview = styled.p`\r\n    line-height: 1.3;\r\n    position: relative;\r\n\r\n    /* &:after {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: linear-gradient(\r\n            to top,\r\n            hsl(210, 38%, 15%) 0%,\r\n            hsla(210, 38%, 15%, 1) 18.7%,\r\n            hsla(210, 38%, 15%, 1) 34.8%,\r\n            hsla(210, 38%, 15%, 1) 48.6%,\r\n            hsla(210, 38%, 15%, 1) 60.3%,\r\n            hsla(210, 38%, 15%, 1) 69.9%,\r\n            hsla(210, 38%, 15%, 0.626) 77.8%,\r\n            hsla(210, 38%, 15%, 0.562) 84.1%,\r\n            hsla(210, 38%, 15%, 0.497) 89%,\r\n            hsla(210, 38%, 15%, 0.431) 92.7%,\r\n            hsla(210, 38%, 15%, 0.364) 95.4%,\r\n            hsla(210, 38%, 15%, 0.295) 97.2%,\r\n            hsla(210, 38%, 15%, 0.224) 98.4%,\r\n            hsla(210, 38%, 15%, 0.151) 99.2%,\r\n            hsla(210, 38%, 15%, 0.077) 99.6%,\r\n            hsla(210, 38%, 15%, 0) 100%\r\n        );\r\n\r\n        linear-gradient(\r\n            to bottom,\r\n            hsla(210, 38%, 15%, 0) 0%,\r\n            hsla(210, 38%, 15%, 0.106) 8.1%,\r\n            hsla(210, 38%, 15%, 0.2) 14.7%,\r\n            hsla(210, 38%, 15%, 0.284) 20%,\r\n            hsla(210, 38%, 15%, 0.358) 24.4%,\r\n            hsla(210, 38%, 15%, 0.426) 28.1%,\r\n            hsla(210, 38%, 15%, 0.487) 31.6%,\r\n            hsla(210, 38%, 15%, 0.544) 35.1%,\r\n            hsla(210, 38%, 15%, 0.598) 38.8%,\r\n            hsla(210, 38%, 15%, 0.649) 43.2%,\r\n            hsla(210, 38%, 15%, 0.701) 48.5%,\r\n            hsla(210, 38%, 15%, 0.753) 55.1%,\r\n            hsla(210, 38%, 15%, 0.808) 63.2%,\r\n            hsla(210, 38%, 15%, 0.866) 73.2%,\r\n            hsla(210, 38%, 15%, 0.93) 85.3%,\r\n            hsl(210, 38%, 15%) 100%\r\n        );\r\n    } */\r\n`;\r\n\r\nexport const SeeMoreButton = styled(Button)`\r\n    font-size: 1rem;\r\n    width: 100%;\r\n    padding: 0.5rem 1rem;\r\n    background: #445970;\r\n    position: absolute;\r\n    bottom: 0rem;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    z-index: 1;\r\n`;\r\n\r\nexport const ButtonContainer = styled.button<{ backgroundColor: string }>`\r\n    position: absolute;\r\n    top: 1rem;\r\n    left: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: ${(props) => props.backgroundColor || '#4c7fbd'};\r\n    border-radius: 50%;\r\n    padding: 0.25rem;\r\n    box-shadow: 0 10px 20px rgb(0 0 0 / 19%), 0 6px 6px rgb(0 0 0 / 23%);\r\n    cursor: pointer;\r\n    z-index: 2;\r\n`;\r\n\r\nexport const PlusIcon = styled(HiOutlinePlus)`\r\n    font-size: 2rem;\r\n`;\r\n\r\nexport const MinusIcon = styled(HiMinus)`\r\n    font-size: 2rem;\r\n`;\r\n\r\nexport const InfoIcon = styled(RiInformationLine)`\r\n    font-size: 1.125rem;\r\n    margin-right: 0.5rem;\r\n`;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useMoviePreview } from '../../../context/MoviePreviewContext';\r\nimport useMovieManager from '../../../hooks/useMovieManager';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport { generateImageUrl } from '../../../utils';\r\nimport { genres as genreObjects } from '../MovieSearch/genres';\r\nimport {\r\n    ButtonContainer,\r\n    GenreContainer,\r\n    Image,\r\n    InfoContainer,\r\n    InfoIcon,\r\n    Item,\r\n    MinusIcon,\r\n    Overview,\r\n    PlusIcon,\r\n    SeeMoreButton,\r\n    SmallGenre,\r\n    Title,\r\n} from './styled';\r\n\r\ninterface Props {\r\n    movie: AddedMovie;\r\n    allowActions: boolean;\r\n}\r\n\r\nconst MovieListItem = ({ movie, allowActions }: Props) => {\r\n    const { setMoviePreview } = useMoviePreview();\r\n    const history = useHistory();\r\n    const { movieInList, movieActionHandler, buttonBackgroundColor } = useMovieManager(movie);\r\n    const genres = movie.genre_ids.map((genreId) => genreObjects.find((g) => g.id === genreId));\r\n\r\n    const onMovieAction = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n        e.stopPropagation();\r\n        movieActionHandler();\r\n    };\r\n\r\n    const onMovieClick = () => {\r\n        const { pathname } = history.location;\r\n        if (pathname.includes(movie.id.toString())) {\r\n            setMoviePreview(null);\r\n        } else {\r\n            setMoviePreview(movie);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Item onClick={onMovieClick} role=\"button\">\r\n            {allowActions && (\r\n                <ButtonContainer onClick={onMovieAction} backgroundColor={buttonBackgroundColor}>\r\n                    {!movieInList && <PlusIcon />}\r\n                    {movieInList && <MinusIcon />}\r\n                </ButtonContainer>\r\n            )}\r\n            <Image src={generateImageUrl(movie.poster_path, 'w342')} alt={movie.title} />{' '}\r\n            <InfoContainer>\r\n                <Title>{movie.title}</Title>\r\n                <GenreContainer>\r\n                    {genres?.slice(0, 2).map((genre) => (\r\n                        <SmallGenre key={genre?.id}>{genre?.name}</SmallGenre>\r\n                    ))}\r\n                </GenreContainer>\r\n                <Overview>{movie.overview}</Overview>\r\n                <SeeMoreButton onClick={onMovieClick}>\r\n                    <InfoIcon />\r\n                    See More\r\n                </SeeMoreButton>\r\n            </InfoContainer>\r\n        </Item>\r\n    );\r\n};\r\n\r\nexport default MovieListItem;\r\n","import styled from 'styled-components';\r\n\r\nexport const List = styled.section`\r\n    display: grid;\r\n    gap: 2rem;\r\n    margin-bottom: 4rem;\r\n\r\n    & > *:not(:last-child) {\r\n        padding-bottom: 2rem;\r\n        border-bottom: 1px solid hsl(212deg 22% 43% / 38%);\r\n    }\r\n\r\n    @media screen and (min-width: 800px) {\r\n        grid-template-columns: repeat(2, 1fr);\r\n        gap: 4rem;\r\n\r\n        & > *:not(:last-child) {\r\n            padding-bottom: 0;\r\n            border-bottom: none;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const Empty = styled.p`\r\n    text-align: center;\r\n    margin: 4rem 0;\r\n\r\n    @media (min-width: 700px) {\r\n        font-size: 1.25rem;\r\n    }\r\n`;\r\n","import React from 'react';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport MovieListItem from '../MovieListItem';\r\nimport { Empty, List } from './styled';\r\n\r\ninterface Props {\r\n    movies: AddedMovie[];\r\n    allowActions: boolean;\r\n}\r\n\r\nconst MovieList = ({ movies, allowActions }: Props) => {\r\n    if (!movies.length) {\r\n        return <Empty>No movies in the list.</Empty>;\r\n    }\r\n\r\n    return (\r\n        <List>\r\n            {movies.map((movie) => (\r\n                <MovieListItem key={movie.id} movie={movie} allowActions={allowActions} />\r\n            ))}\r\n        </List>\r\n    );\r\n};\r\n\r\nexport default MovieList;\r\n","import axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { MovieResponse } from '../types/movies';\r\n\r\ninterface Props {\r\n    genres: number[];\r\n    movieQuery: string;\r\n}\r\n\r\ninterface FetchedMovies {\r\n    query: MovieResponse;\r\n    genres: MovieResponse;\r\n}\r\n\r\nconst emptyResponse: MovieResponse = {\r\n    page: 0,\r\n    results: [],\r\n    total_results: 0,\r\n    total_pages: 0,\r\n};\r\n\r\nconst useFetchMovies = ({ genres, movieQuery }: Props) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<true | null>(null);\r\n    const [movies, setMovies] = useState<FetchedMovies>({ query: emptyResponse, genres: emptyResponse });\r\n    const cancelToken = axios.CancelToken.source();\r\n\r\n    const fetchMovieQuery = async (url: string) => {\r\n        try {\r\n            const res = await axios.get(url, {\r\n                cancelToken: cancelToken.token,\r\n            });\r\n            if (res.status === 200) {\r\n                return res.data;\r\n            }\r\n        } catch (error) {\r\n            cancelToken.cancel('Error in try catch block.');\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            if (movieQuery) {\r\n                try {\r\n                    setLoading(true);\r\n                    const res = await axios.get(`/movies/query/${movieQuery}`, {\r\n                        cancelToken: cancelToken.token,\r\n                    });\r\n                    if (res.status === 200) {\r\n                        setMovies({ ...movies, query: res.data });\r\n                    }\r\n                    setLoading(false);\r\n                } catch (error) {\r\n                    cancelToken.cancel('Error in try catch block.');\r\n                    setError(true);\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetch();\r\n\r\n        return () => {\r\n            cancelToken.cancel('Component got unmounted');\r\n        };\r\n    }, [movieQuery]);\r\n\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const res = await axios.post('/movies/genres', {\r\n                    genres,\r\n                    cancelToken: cancelToken.token,\r\n                });\r\n\r\n                if (res.status === 200) {\r\n                    setMovies({ ...movies, genres: res.data });\r\n                }\r\n                setLoading(false);\r\n            } catch (error) {\r\n                cancelToken.cancel('Error in try catch block.');\r\n                setError(true);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetch();\r\n\r\n        return () => {\r\n            cancelToken.cancel('Component got unmounted');\r\n        };\r\n    }, [genres]);\r\n\r\n    return { loading, error, movies };\r\n};\r\n\r\nexport default useFetchMovies;\r\n","import { HiOutlinePlus } from 'react-icons/hi';\r\nimport styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n    border-radius: 4px;\r\n    background: var(--blue-active);\r\n    position: relative;\r\n`;\r\n\r\nexport const ButtonContainer = styled.button`\r\n    position: absolute;\r\n    top: 1rem;\r\n    left: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: hsl(213deg 40% 49%);\r\n    border-radius: 50%;\r\n    padding: 0.25rem;\r\n    box-shadow: 0 10px 20px rgb(0 0 0 / 19%), 0 6px 6px rgb(0 0 0 / 23%);\r\n    cursor: pointer;\r\n`;\r\n\r\nexport const PlusIcon = styled(HiOutlinePlus)`\r\n    font-size: 2rem;\r\n`;\r\n","import React from 'react';\r\nimport { ButtonContainer, Container, PlusIcon } from './style';\r\n\r\nconst MovieCardSkeleton = () => {\r\n    return (\r\n        <Container>\r\n            <ButtonContainer>\r\n                <PlusIcon />\r\n            </ButtonContainer>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default MovieCardSkeleton;\r\n","import { motion } from 'framer-motion';\r\nimport { HiMinus, HiOutlinePlus } from 'react-icons/hi';\r\nimport styled from 'styled-components';\r\n\r\nexport const Container = styled(motion.article)`\r\n    position: relative;\r\n    border-radius: 4px;\r\n    height: 100%;\r\n`;\r\n\r\nexport const Card = styled(motion.button)<{ zIndex: number }>`\r\n    height: 100% !important;\r\n    width: 100%;\r\n    cursor: pointer;\r\n    z-index: ${(props) => props.zIndex || 0};\r\n\r\n    &:focus {\r\n        outline: none;\r\n    }\r\n\r\n    &:before {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: linear-gradient(\r\n            to bottom,\r\n            hsla(0, 0%, 0%, 0) 0%,\r\n            hsla(0, 0%, 0%, 0.041) 7%,\r\n            hsla(0, 0%, 0%, 0.082) 13.5%,\r\n            hsla(0, 0%, 0%, 0.124) 19.4%,\r\n            hsla(0, 0%, 0%, 0.166) 25%,\r\n            hsla(0, 0%, 0%, 0.208) 30.4%,\r\n            hsla(0, 0%, 0%, 0.251) 35.6%,\r\n            hsla(0, 0%, 0%, 0.295) 40.9%,\r\n            hsla(0, 0%, 0%, 0.339) 46.4%,\r\n            hsla(0, 0%, 0%, 0.385) 52.1%,\r\n            hsla(0, 0%, 0%, 0.431) 58.3%,\r\n            hsla(0, 0%, 0%, 0.479) 65%,\r\n            hsla(0, 0%, 0%, 0.527) 72.4%,\r\n            hsla(0, 0%, 0%, 0.577) 80.6%,\r\n            hsla(0, 0%, 0%, 0.628) 89.8%,\r\n            hsla(0, 0%, 0%, 0.68) 100%\r\n        );\r\n        z-index: 1;\r\n    }\r\n`;\r\n\r\nexport const ContentContainer = styled(motion.div)`\r\n    height: 100%;\r\n    width: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n`;\r\n\r\nexport const Image = styled(motion.img)`\r\n    border-radius: 4px;\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    display: block;\r\n    object-fit: cover;\r\n    z-index: 0;\r\n`;\r\n\r\nexport const Title = styled(motion.h3)`\r\n    border-radius: 4px;\r\n    width: 100%;\r\n    padding: 1rem;\r\n    margin-top: auto;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    line-height: 1.3;\r\n    background: #00000038;\r\n    background: linear-gradient(\r\n        to bottom,\r\n        hsla(0, 0%, 0%, 0) 0%,\r\n        hsla(0, 0%, 0%, 0.007) 7.9%,\r\n        hsla(0, 0%, 0%, 0.028) 15%,\r\n        hsla(0, 0%, 0%, 0.062) 21.4%,\r\n        hsla(0, 0%, 0%, 0.105) 27.3%,\r\n        hsla(0, 0%, 0%, 0.158) 32.8%,\r\n        hsla(0, 0%, 0%, 0.218) 38.1%,\r\n        hsla(0, 0%, 0%, 0.284) 43.3%,\r\n        hsla(0, 0%, 0%, 0.354) 48.5%,\r\n        hsla(0, 0%, 0%, 0.427) 54%,\r\n        hsla(0, 0%, 0%, 0.5) 59.9%,\r\n        hsla(0, 0%, 0%, 0.574) 66.2%,\r\n        hsla(0, 0%, 0%, 0.645) 73.3%,\r\n        hsla(0, 0%, 0%, 0.712) 81.2%,\r\n        hsla(0, 0%, 0%, 0.775) 90%,\r\n        hsla(0, 0%, 0%, 0.83) 100%\r\n    );\r\n    z-index: 1;\r\n`;\r\n\r\nexport const ButtonContainer = styled.button<{ backgroundColor: string }>`\r\n    position: absolute;\r\n    top: 1rem;\r\n    left: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: ${(props) => props.backgroundColor || '#4c7fbd'};\r\n    border-radius: 50%;\r\n    padding: 0.25rem;\r\n    box-shadow: 0 10px 20px rgb(0 0 0 / 19%), 0 6px 6px rgb(0 0 0 / 23%);\r\n    cursor: pointer;\r\n    z-index: 2;\r\n`;\r\n\r\nexport const PlusIcon = styled(HiOutlinePlus)`\r\n    font-size: 2rem;\r\n`;\r\n\r\nexport const MinusIcon = styled(HiMinus)`\r\n    font-size: 2rem;\r\n`;\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Movie } from '../../../../../server/src/types/movies';\r\nimport { useMoviePreview } from '../../../context/MoviePreviewContext';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport useMovieManager from '../../../hooks/useMovieManager';\r\nimport useViewportWidth from '../../../hooks/useViewportWidth';\r\nimport { generateImageUrl } from '../../../utils';\r\nimport { ButtonContainer, Card, Container, ContentContainer, Image, MinusIcon, PlusIcon, Title } from './styled';\r\n\r\ninterface Props {\r\n    movie: Movie;\r\n}\r\n\r\nconst MovieCard = ({ movie }: Props) => {\r\n    const history = useHistory();\r\n    const { width } = useViewportWidth();\r\n    const { setMoviePreview: setMovieDetail } = useMoviePreview();\r\n    const { room } = useRoom();\r\n    const [zIndex, setZIndex] = useState(0);\r\n    const imageUrl = generateImageUrl(movie.poster_path, 'w342');\r\n    const { movieActionHandler, buttonBackgroundColor, movieInList } = useMovieManager(movie);\r\n    const layoutId = width > 700 ? 'undefined' : `image-${movie.id}`;\r\n\r\n    const onMovieClick = () => {\r\n        const currPathname = history.location.pathname;\r\n        if (currPathname.includes(movie.id.toString())) {\r\n            history.push(`/selection/${room.roomId}`);\r\n        } else {\r\n            setZIndex(2);\r\n            setMovieDetail(movie);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container layout>\r\n            <Card onClick={onMovieClick} layoutId={layoutId} zIndex={zIndex}>\r\n                <ContentContainer>\r\n                    <Image src={imageUrl} alt={`Movie poster for ${movie.title}.`} />\r\n                    <Title>{movie.title}</Title>\r\n                </ContentContainer>\r\n            </Card>\r\n            <ButtonContainer onClick={movieActionHandler} backgroundColor={buttonBackgroundColor}>\r\n                {!movieInList && <PlusIcon />}\r\n                {movieInList && <MinusIcon />}\r\n            </ButtonContainer>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default MovieCard;\r\n","import styled from 'styled-components';\r\n\r\nexport const Gallery = styled.div`\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n    grid-gap: 0.5rem;\r\n\r\n    & > * {\r\n        min-height: 300px;\r\n    }\r\n\r\n    @media screen and (min-width: 700px) {\r\n        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n\r\n        & > * {\r\n            min-height: 300px;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const Empty = styled.p`\r\n    text-align: center;\r\n    margin: 4rem 0;\r\n\r\n    @media (min-width: 700px) {\r\n        font-size: 1.25rem;\r\n    }\r\n`;\r\n","import React from 'react';\r\nimport MovieCardSkeleton from '../../../components/MovieCardSkeleton';\r\nimport { MovieResponse } from '../../../types/movies';\r\nimport MovieCard from '../MovieCard';\r\nimport { Empty, Gallery } from './style';\r\n\r\ninterface Props {\r\n    movies: MovieResponse;\r\n    loading: boolean;\r\n}\r\n\r\nconst MovieGallery = ({ movies, loading }: Props) => {\r\n    const moviesOnDisplay = movies.results || [];\r\n\r\n    if (loading) {\r\n        return (\r\n            <Gallery>\r\n                {Array.from(Array(20).keys()).map((n, index) => (\r\n                    <MovieCardSkeleton key={index} />\r\n                ))}\r\n            </Gallery>\r\n        );\r\n    }\r\n\r\n    if (!moviesOnDisplay?.length) {\r\n        return <Empty>No movies found. Try a different search.</Empty>;\r\n    }\r\n\r\n    return (\r\n        <Gallery>\r\n            {moviesOnDisplay.map((movie) => (\r\n                <MovieCard key={movie.id} movie={movie} />\r\n            ))}\r\n        </Gallery>\r\n    );\r\n};\r\n\r\nexport default MovieGallery;\r\n","import Select from 'react-select';\r\nimport styled from 'styled-components';\r\n\r\nexport const FormField = styled.div<{ show: boolean }>`\r\n    display: ${(props) => (props.show ? 'flex' : 'none')};\r\n    flex-direction: column;\r\n    margin-bottom: 1rem;\r\n\r\n    label {\r\n        margin-bottom: 1rem;\r\n    }\r\n\r\n    input {\r\n        padding: 0.5rem;\r\n        border-radius: 4px;\r\n    }\r\n\r\n    &:last-of-type {\r\n        margin-bottom: 2rem;\r\n    }\r\n`;\r\n\r\nexport const StyledSelect = styled(Select)`\r\n    z-index: 4;\r\n`;\r\n\r\nexport const colorStyles = {\r\n    control: (styles: any) => ({ ...styles, backgroundColor: 'white', color: 'var(--blue-dark-bg)' }),\r\n    option: (styles: { [x: string]: any }, { data, isDisabled, isFocused, isSelected }: any) => {\r\n        return {\r\n            ...styles,\r\n            backgroundColor: 'white',\r\n            color: 'var(--blue-dark-bg)',\r\n            cursor: isDisabled ? 'not-allowed' : 'default',\r\n        };\r\n    },\r\n    multiValue: (styles: any, { data }: any) => {\r\n        return {\r\n            ...styles,\r\n            backgroundColor: 'white',\r\n        };\r\n    },\r\n    multiValueLabel: (styles: any, { data }: any) => ({\r\n        ...styles,\r\n        color: 'white',\r\n        backgroundColor: 'var(--blue-dark-bg)',\r\n        padding: '4px 8px',\r\n        borderRadius: '4px',\r\n    }),\r\n    multiValueRemove: (styles: any, { data }: any) => ({\r\n        ...styles,\r\n        color: data.color,\r\n        ':hover': {\r\n            backgroundColor: 'white',\r\n            color: 'var(--blue-dark-bg)',\r\n        },\r\n    }),\r\n};\r\n","import React, { useState } from 'react';\r\nimport { OptionsType } from 'react-select';\r\nimport useFetchMovies from '../../../hooks/useFetchMovies';\r\nimport { Genre } from '../../../types/movies';\r\nimport MovieGallery from '../MovieGallery';\r\nimport { genres as allGenres } from './genres';\r\nimport { colorStyles, FormField, StyledSelect } from './style';\r\n\r\nconst MovieSearch = () => {\r\n    const [genres, setGenres] = useState<number[]>([]);\r\n    const [movieQuery, setMovieQuery] = useState('');\r\n    const { loading, error, movies } = useFetchMovies({ genres, movieQuery });\r\n    const genreOptions = allGenres.map((genre: Genre) => ({ value: genre.id, label: genre.name }));\r\n    const moviesOnDisplay = movieQuery ? movies.query : movies.genres;\r\n\r\n    const onQueryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setMovieQuery(e.target.value);\r\n    };\r\n\r\n    const onGenreChange = (\r\n        value: OptionsType<{\r\n            value: number;\r\n            label: string;\r\n        }>,\r\n    ) => {\r\n        setGenres(value.map((genre) => genre.value));\r\n    };\r\n\r\n    const onFocus = (e: React.FocusEvent<HTMLInputElement>) => {\r\n        e.target.select();\r\n    };\r\n\r\n    return (\r\n        <section>\r\n            <form>\r\n                <FormField show={true}>\r\n                    <label>Search by name</label>\r\n                    <input type=\"text\" value={movieQuery} onChange={onQueryChange} onFocus={onFocus} />\r\n                </FormField>\r\n                <FormField show={movieQuery === ''}>\r\n                    <label>Search by genre</label>\r\n                    <StyledSelect\r\n                        isMulti\r\n                        name=\"genres\"\r\n                        options={genreOptions}\r\n                        styles={colorStyles}\r\n                        onChange={onGenreChange}\r\n                    />\r\n                </FormField>\r\n            </form>\r\n            <MovieGallery movies={moviesOnDisplay} loading={loading} />\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default MovieSearch;\r\n","import React from 'react';\r\nimport Tabs from '../../../components/Tabs';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport MovieList from '../MovieList';\r\nimport MovieSearch from '../MovieSearch';\r\n\r\nconst MovieSelection = () => {\r\n    const { room } = useRoom();\r\n    return (\r\n        <Tabs tabs={['Search', `Movie List (${room.movies.length})`]}>\r\n            <MovieSearch />\r\n            <MovieList movies={room.movies} allowActions />\r\n        </Tabs>\r\n    );\r\n};\r\n\r\nexport default MovieSelection;\r\n","import styled from 'styled-components';\r\nimport { MaxWidthContainer } from '../../../styles';\r\n\r\nexport const Container = styled(MaxWidthContainer)`\r\n    margin-bottom: 2.5rem;\r\n`;\r\n","import React, { useEffect } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport toast from 'react-hot-toast';\r\nimport InviteLink from '../../../components/InviteLink';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport { FontWeight600, Subtitle, Title } from '../../../styles';\r\nimport { ToastType, useToast } from '../../../utils';\r\nimport ActionButton from '../ActionButton';\r\nimport MovieSelection from '../MovieSelection';\r\nimport { Container } from './style';\r\n\r\nconst ownerText = (\r\n    <>\r\n        You&apos;re the room owner. Add movies you&apos;d want to watch, then wait for others to add theirs. When\r\n        participants are ready, tap on <FontWeight600>Start Swiping</FontWeight600>.\r\n    </>\r\n);\r\nconst participantText = (\r\n    <>\r\n        Add movies you&apos;d want to watch. When you&apos;re ready to start voting, tap on{' '}\r\n        <FontWeight600>Ready to Swipe</FontWeight600>.\r\n    </>\r\n);\r\n\r\nconst Selection = () => {\r\n    const { user } = useUser();\r\n    const { room } = useRoom();\r\n    const isOwner = room.ownerId === user.id;\r\n\r\n    useEffect(() => {\r\n        let toastId: string;\r\n        const timeoutId = window.setTimeout(() => {\r\n            toastId = useToast({\r\n                type: ToastType.Custom,\r\n                message: 'Invite others by sharing the link to this page.',\r\n                duration: 8000,\r\n            });\r\n        }, 1000);\r\n        return () => {\r\n            if (toastId) {\r\n                toast.dismiss(toastId);\r\n            }\r\n            clearTimeout(timeoutId);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <Container>\r\n            <Helmet>\r\n                <title>Selection | Movie Swiper</title>\r\n            </Helmet>\r\n            <Title>Pick Your Movies</Title>\r\n            <Subtitle>{isOwner ? ownerText : participantText}</Subtitle>\r\n            <InviteLink />\r\n            <MovieSelection />\r\n            <ActionButton />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Selection;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport MovieList from '../../selection/MovieList';\r\n\r\nconst Matches = () => {\r\n    const { room } = useRoom();\r\n    const { user } = useUser();\r\n\r\n    const matches = room.movies.reduce((matches: AddedMovie[], movie: AddedMovie) => {\r\n        const matched =\r\n            movie.swipes.find((swipe) => swipe.user.id === user.id && swipe.liked) &&\r\n            movie.swipes.find((swipe) => swipe.liked && swipe.user.id !== user.id);\r\n\r\n        if (matched) {\r\n            matches.push(movie);\r\n        }\r\n\r\n        return matches;\r\n    }, []);\r\n\r\n    return <MovieList movies={matches} allowActions={false} />;\r\n};\r\n\r\nexport default Matches;\r\n","import { motion } from 'framer-motion';\r\nimport styled from 'styled-components';\r\nimport { Button } from '../../../styles';\r\nimport { RiInformationLine } from 'react-icons/ri';\r\n\r\nexport const Container = styled.article`\r\n    margin: auto;\r\n    margin-bottom: 2.5rem;\r\n    max-width: 600px;\r\n    max-width: 350px;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        height: auto;\r\n    }\r\n`;\r\n\r\nexport const Image = styled(motion.img)`\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    margin: auto;\r\n`;\r\n\r\nexport const Title = styled(motion.h3)`\r\n    font-size: 1.25rem;\r\n    padding: 1.5rem 1rem 1rem;\r\n    border-radius: 4px;\r\n    margin-top: auto;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    line-height: 1.3;\r\n    width: 100%;\r\n    text-transform: none;\r\n    background: var(--blue-dark);\r\n`;\r\n\r\nexport const PreviewButton = styled(Button)`\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    padding: 0;\r\n    background: hsl(211deg 43% 10%);\r\n    color: var(--white-muted);\r\n    border-top-left-radius: 0;\r\n    border-top-right-radius: 0;\r\n`;\r\n\r\nexport const Details = styled.p`\r\n    width: 100%;\r\n    font-size: 0.875rem;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 0.5rem;\r\n    background: #2e3f52;\r\n    padding: 1rem;\r\n`;\r\n\r\nexport const ExpandIcon = styled(RiInformationLine)`\r\n    font-size: 1rem;\r\n    margin-right: 0.5rem;\r\n`;\r\n","import React from 'react';\r\nimport { useMoviePreview } from '../../../context/MoviePreviewContext';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport { generateImageUrl } from '../../../utils';\r\nimport { Container, Details, ExpandIcon, Image, PreviewButton, Title } from './style';\r\n\r\ninterface Props {\r\n    movie: AddedMovie;\r\n}\r\n\r\nconst SwipeItem = ({ movie }: Props) => {\r\n    const { setMoviePreview } = useMoviePreview();\r\n    const imageSrc = generateImageUrl(movie.poster_path, 'w500');\r\n\r\n    const showPreview = () => {\r\n        setMoviePreview(movie);\r\n    };\r\n\r\n    return (\r\n        <Container onClick={showPreview}>\r\n            <PreviewButton onClick={showPreview}>\r\n                <Title>{movie.title}</Title>\r\n                <Details>\r\n                    <ExpandIcon /> Details\r\n                </Details>\r\n            </PreviewButton>\r\n            <Image src={imageSrc} alt={movie.title}></Image>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default SwipeItem;\r\n","import styled, { css } from 'styled-components';\r\nimport { Button } from '../../../styles';\r\nimport { RiCloseFill } from 'react-icons/ri';\r\nimport { HiHeart } from 'react-icons/hi';\r\n\r\nexport const LikeButton = styled(Button)`\r\n    background: var(--blue-active-90);\r\n    outline: none;\r\n    border-radius: 0;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        padding: 1rem 2rem;\r\n        white-space: nowrap;\r\n    }\r\n`;\r\n\r\nexport const DislikeButton = styled(Button)`\r\n    background: var(--accent-dark-90);\r\n    outline: none;\r\n    border-radius: 0;\r\n\r\n    @media screen and (min-width: 600px) {\r\n        padding: 1rem 2rem;\r\n        white-space: nowrap;\r\n    }\r\n`;\r\n\r\nconst iconStyles = css`\r\n    font-size: 1.5rem;\r\n`;\r\n\r\nexport const LikeIcon = styled(HiHeart)`\r\n    ${iconStyles}\r\n    margin-right: 1rem;\r\n`;\r\n\r\nexport const DislikeIcon = styled(RiCloseFill)`\r\n    ${iconStyles}\r\n    margin-right: 0.5rem;\r\n`;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport SwiperCore, { A11y, EffectCoverflow, EffectFade, Pagination } from 'swiper';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\n// Swiper imports\r\nimport 'swiper/swiper-bundle.min.css';\r\nimport { CoverflowEffectOptions } from 'swiper/types/components/effect-coverflow';\r\nimport { PaginationOptions } from 'swiper/types/components/pagination';\r\nimport FixedContainer from '../../../components/FixedContainer';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport { swipeMovie } from '../../../sockets/emitters';\r\nimport { AddedMovie } from '../../../types/movies';\r\nimport SwipeItem from '../SwipeItem';\r\nimport { DislikeButton, DislikeIcon, LikeButton, LikeIcon } from './style';\r\n\r\nSwiperCore.use([Pagination, A11y, EffectCoverflow, EffectFade]);\r\n\r\nconst coverFlowEffectProps: CoverflowEffectOptions = {\r\n    rotate: 50,\r\n    stretch: 0,\r\n    depth: 200,\r\n    modifier: 1,\r\n    slideShadows: false,\r\n};\r\n\r\nconst paginationProps: PaginationOptions = {\r\n    clickable: false,\r\n    type: 'progressbar',\r\n    progressbarFillClass: 'swiper-pagination-progressbar-fill',\r\n};\r\n\r\ninterface MovieToSwipe extends AddedMovie {\r\n    swiped: boolean;\r\n}\r\n\r\nconst SwipeArea = () => {\r\n    const history = useHistory();\r\n    const { room } = useRoom();\r\n    const { user } = useUser();\r\n    const [swiper, setSwiper] = useState<SwiperCore>();\r\n    const movies = useRef<MovieToSwipe[]>([]);\r\n    const [disabled, setDisabled] = useState(false);\r\n\r\n    useEffect(() => {\r\n        movies.current = room.movies.map((movie) => ({ ...movie, swiped: false }));\r\n    }, [room.movies.length]);\r\n\r\n    const enableButtons = () => {\r\n        setDisabled(false);\r\n    };\r\n\r\n    const disableButtons = () => {\r\n        setDisabled(true);\r\n    };\r\n\r\n    const onLike = () => {\r\n        if (!swiper) {\r\n            return;\r\n        }\r\n\r\n        const nextIndex = swiper.activeIndex + 1;\r\n        swiper.slideTo(nextIndex);\r\n    };\r\n\r\n    const onDislike = () => {\r\n        if (!swiper) {\r\n            return;\r\n        }\r\n\r\n        const movieIndex = swiper.activeIndex - 1;\r\n        handleSwipeEmit({ index: movieIndex, liked: false });\r\n        const nextIndex = swiper.activeIndex + 1;\r\n        swiper.slideTo(nextIndex, 400);\r\n    };\r\n\r\n    const onSlideNextTransitionStart = (swiper: SwiperCore) => {\r\n        disableButtons();\r\n\r\n        /* Ignore slideNext on init */\r\n        if (!swiper || swiper.activeIndex === 1) {\r\n            return;\r\n        }\r\n\r\n        const movieIndex = swiper.previousIndex - 1;\r\n        handleSwipeEmit({ index: movieIndex, liked: true });\r\n\r\n        swiper.updateProgress();\r\n        swiper.update();\r\n    };\r\n\r\n    const onSlidePrevTransitionStart = (swiper: SwiperCore) => {\r\n        disableButtons();\r\n\r\n        if (!swiper) {\r\n            return;\r\n        }\r\n\r\n        const movieIndex = swiper.previousIndex - 1;\r\n        handleSwipeEmit({ index: movieIndex, liked: false });\r\n\r\n        const nextIndex = swiper.activeIndex + 2;\r\n        swiper.slideTo(nextIndex, 100);\r\n        swiper.update();\r\n        swiper.updateProgress();\r\n    };\r\n\r\n    const onSwiperInit = (swiper: SwiperCore) => {\r\n        const actualProgress = 1 / room.movies.length;\r\n        document.documentElement.style.setProperty('--swipe-progress', actualProgress.toString());\r\n        setSwiper(swiper);\r\n    };\r\n\r\n    const onProgress = (swiper: SwiperCore) => {\r\n        const actualProgress = (1 / room.movies.length) * swiper.activeIndex;\r\n        document.documentElement.style.setProperty('--swipe-progress', actualProgress.toString());\r\n    };\r\n\r\n    const handleSwipeEmit = ({ index, liked }: { index: number; liked: boolean }) => {\r\n        const movie = movies.current[index];\r\n        if (!movie || movie.swiped) {\r\n            return;\r\n        }\r\n\r\n        movies.current = movies.current.map((m) => (m.id === movie.id ? { ...m, swiped: true } : m));\r\n        swipeMovie({ roomId: room.roomId as string, movieId: movie.id, liked, user });\r\n    };\r\n\r\n    const onSlideNextTransitionEnd = (swiper: SwiperCore) => {\r\n        enableButtons();\r\n\r\n        if (swiper.activeIndex > room.movies.length) {\r\n            history.push(`/results/${room.roomId}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {!!room.movies.length && (\r\n                <Swiper\r\n                    onSlidePrevTransitionStart={onSlidePrevTransitionStart}\r\n                    onSlideNextTransitionStart={onSlideNextTransitionStart}\r\n                    onSlidePrevTransitionEnd={enableButtons}\r\n                    onSlideNextTransitionEnd={onSlideNextTransitionEnd}\r\n                    onProgress={onProgress}\r\n                    onInit={onSwiperInit}\r\n                    initialSlide={1}\r\n                    speed={400}\r\n                    observer\r\n                    grabCursor\r\n                    centeredSlides\r\n                    spaceBetween={5000}\r\n                    effect=\"coverflow\"\r\n                    coverflowEffect={coverFlowEffectProps}\r\n                    pagination={paginationProps}\r\n                >\r\n                    <SwiperSlide key=\"firstSlide\"></SwiperSlide>\r\n                    {room.movies.map((movie) => (\r\n                        <SwiperSlide key={movie.id}>\r\n                            <SwipeItem movie={movie} />\r\n                        </SwiperSlide>\r\n                    ))}\r\n                    <SwiperSlide key=\"lastSlide\"></SwiperSlide>\r\n                </Swiper>\r\n            )}\r\n            <FixedContainer position=\"fixed\">\r\n                <DislikeButton onClick={onDislike} disabled={disabled}>\r\n                    <DislikeIcon />\r\n                    Dislike\r\n                </DislikeButton>\r\n                <LikeButton onClick={onLike} disabled={disabled}>\r\n                    <LikeIcon />\r\n                    Like\r\n                </LikeButton>\r\n            </FixedContainer>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SwipeArea;\r\n","import styled from 'styled-components';\r\nimport { MaxWidthContainer } from '../../../styles';\r\n\r\nexport const Container = styled(MaxWidthContainer)`\r\n    max-width: 600px;\r\n    margin: auto;\r\n`;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport Tabs from '../../../components/Tabs';\r\nimport { useRoom } from '../../../context/RoomContext';\r\nimport { useUser } from '../../../context/UserContext';\r\nimport Matches from '../Matches';\r\nimport SwipeArea from '../SwipeArea';\r\nimport { Container } from './style';\r\n\r\nconst Swiper = () => {\r\n    const { room } = useRoom();\r\n    const { user } = useUser();\r\n    const numMatches = room.movies.reduce((num, movie) => {\r\n        const matched =\r\n            movie.swipes.find((swipe) => swipe.user.id === user.id && swipe.liked) &&\r\n            movie.swipes.find((swipe) => swipe.liked && swipe.user.id !== user.id);\r\n        if (matched) {\r\n            return num + 1;\r\n        }\r\n        return num;\r\n    }, 0);\r\n\r\n    return (\r\n        <Container>\r\n            <Helmet>\r\n                <title>Swipe | Movie Swiper</title>\r\n            </Helmet>\r\n            <Tabs tabs={['Movie', `Matches (${numMatches})`]}>\r\n                <SwipeArea />\r\n                <Matches />\r\n            </Tabs>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Swiper;\r\n","import { AnimatePresence, AnimateSharedLayout } from 'framer-motion';\nimport React from 'react';\nimport { Toaster } from 'react-hot-toast';\nimport { Route, Switch } from 'react-router-dom';\nimport './App.css';\nimport AppContainer from './components/AppContainer';\nimport Footer from './components/Footer';\nimport Nav from './components/Nav';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport { useMoviePreview } from './context/MoviePreviewContext';\nimport Create from './pages/create/Create';\nimport Expired from './pages/expired/Expired';\nimport Home from './pages/home/Home';\nimport Join from './pages/join/Join';\nimport Results from './pages/results/Results';\nimport MovieDetail from './pages/selection/MovieDetail';\nimport Selection from './pages/selection/Selection';\nimport Swiper from './pages/swiper/Swiper';\n\nconst App = () => {\n    const { moviePreview } = useMoviePreview();\n\n    return (\n        <AnimateSharedLayout type=\"crossfade\">\n            <AnimatePresence>{moviePreview && <MovieDetail movie={moviePreview} />}</AnimatePresence>\n            <Toaster />\n            <Nav />\n            <AppContainer>\n                <Switch>\n                    <Route path=\"/\" exact component={Home} />\n                    <Route path=\"/create\" component={Create} />\n                    <Route path=\"/join/:id\" component={Join} />\n                    <Route path=\"/expired\" component={Expired} />\n                    <ProtectedRoute path={['/selection/:id/:movieId', '/selection/:id']} component={Selection} />\n                    <ProtectedRoute path={['/swiper/:id/:movieId', '/swiper/:id']} component={Swiper} />\n                    <ProtectedRoute path={['/results/:id/:movieId', '/results/:id']} component={Results} />\n                    <Route component={Home} />\n                </Switch>\n            </AppContainer>\n            <Footer />\n        </AnimateSharedLayout>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\nimport MoviePreviewProvider from './context/MoviePreviewContext';\nimport RoomProvider from './context/RoomContext';\nimport UserProvider from './context/UserContext';\nimport './index.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Router>\n            <UserProvider>\n                <RoomProvider>\n                    <MoviePreviewProvider>\n                        <App />\n                    </MoviePreviewProvider>\n                </RoomProvider>\n            </UserProvider>\n        </Router>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}